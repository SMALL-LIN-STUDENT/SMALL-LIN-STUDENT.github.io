<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="referrer" content="origin">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>
        
            SpringBoot
        
    </title>
    <link rel="shortcut icon" href="#"/>

    <link type="text/css" rel="stylesheet" href="/font/LongCang.css">
    <link type="text/css" rel="stylesheet" href="/font/Monda.css">
    <link type="text/css" rel="stylesheet" href="/font/NotoSansSC.css">
    <link type="text/css" rel="stylesheet" href="/font/NotoSerifSC.css">
    <link type="text/css" rel="stylesheet" href="/font/Playball.css">
    <link type="text/css" rel="stylesheet" href="/font/PTMono.css">
    <link type="text/css" rel="stylesheet" href="/font/Roboto.css">
    <link type="text/css" rel="stylesheet" href="/font/RobotoSlab.css">
    <link type="text/css" rel="stylesheet" href="/font/Rosario.css">
    <link type="text/css" rel="stylesheet" href="/font/UbuntuMono.css">

    <link type="text/css" rel="stylesheet" href="/css/base.css">
    <link type="text/css" rel="stylesheet" href="/css/code.css">

    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <a id="cover"></a>
    <link type="text/css" rel="stylesheet" href="/css/post.css">
<div id="header" class="header">
    <div class="vertical">
        <div class="inner">
            
                <h1 class="header-subtitle">SpringBoot</h1>
                <div class="header-subinfo">
                    <p class="article-info-text">
                        <span>
                            <i class="iconfont icon-time"></i> å‘è¡¨æ—¶é—´ï¼š2022-12-15
                        </span>
                        
                            <span id="/computer-science/java/course-1/ç¬¬ä¸€å‘¨è®¡ç®—/" class="leancloud_visitors" data-flag-title="SpringBoot">
                                <i class="iconfont icon-browse"></i> é˜…è¯»ï¼š<sapn class="leancloud-visitors-count"></span>
                            </span>
                        
                        <span>
                            <i class="iconfont icon-interactive"></i> è¯„è®ºï¼š<span class="valine-comment-count" data-xid="/computer-science/java/course-1/ç¬¬ä¸€å‘¨è®¡ç®—/"></span>
                        </span>  
                    </p>
                    
                        
                            <span class="category-color">è®¡ç®—æœºç§‘å­¦</span>
                        
                            <span class="category-color">Java</span>
                        
                            <span class="category-color">é›¶åŸºç¡€å­¦Javaè¯­è¨€-æµ™æ±Ÿå¤§å­¦-ç¿æº</span>
                        
                    
                    
                </div>
            
        </div>
    </div>
    
</div>
<div id="container">
    
        <!-- æ–‡ç« é¡µé¢ -->
        <div id="article">
            <div class="toc"></div>
            <div class="article-body">
                <h1 align="center">SpringBoot</h1>
<p>ç‚¹è§£è¦å­¦</p>
<ul>
<li>
<p>Spring æŠ€æœ¯æ˜¯ JavaEE å¼€å‘çš„å¿…å¤‡æŠ€èƒ½ï¼Œä¼ä¸šå¼€å‘æŠ€æœ¯é€‰å‹å‘½ä¸­ç‡ &gt; 90%</p>
</li>
<li>
<p>ä¸“ä¸šè§’åº¦</p>
</li>
</ul>
<p>ç”¨æ¥ç®€åŒ–å¼€å‘ï¼Œé™ä½ä¼ä¸šçº§å¼€å‘çš„å¤æ‚æ€§</p>
<p>æ¡†æ¶æ•´åˆï¼Œé«˜æ•ˆæ•´åˆå…¶ä»–æŠ€æœ¯ï¼Œä»¥æé«˜ä¼ä¸šçº§åº”ç”¨ç¨‹åºå¼€å‘ä¸è¿è¡Œæ•ˆç‡</p>
<ul>
<li>ç®€åŒ–å¼€å‘</li>
</ul>
<p>IOC</p>
<p>AOP</p>
<ul>
<li>â€‹			äº‹åŠ¡å¤„ç†</li>
</ul>
<p>æ¡†æ¶æ•´åˆ</p>
<ul>
<li>MyBaties</li>
<li>mybatis-plus</li>
<li>Struts</li>
<li>Struts2</li>
<li>Hibernate</li>
</ul>
<p>æ€ä¹ˆå­¦ä¹ </p>
<ul>
<li>å­¦ä¹  spring æ¡†æ¶çš„è®¾è®¡æ€æƒ³</li>
<li>å­¦ä¹ åŸºç¡€æ“ä½œï¼Œæ€è€ƒæ“ä½œä¸æ€æƒ³ä¹‹é—´çš„è”ç³»</li>
<li>å­¦ä¹ æ¡ˆä¾‹ï¼Œç†Ÿç»ƒåº”ç”¨æ“ä½œçš„åŒæ—¶ï¼Œä½“éªŒæ€æƒ³</li>
</ul>
<p>åˆè¯† spring</p>
<p>äº†è§£ spring å®¶æ— (Spring å…¨å®¶æ¡¶)</p>
<p>å‘å±•å² (Spring 5.0)</p>
<h1 id="spring-frameworkç³»ç»Ÿæ¶æ„"><a class="markdownIt-Anchor" href="#spring-frameworkç³»ç»Ÿæ¶æ„">#</a> spring framework ç³»ç»Ÿæ¶æ„</h1>
<ul>
<li>Spring Framework æ˜¯ spring ç”Ÿæ€åœˆä¸­æœ€åŸºç¡€çš„é¡¹ç›®ï¼Œæ˜¯å…¶ä»–é¡¹ç›®çš„æ ¹åŸºã€‚</li>
</ul>
<p>(1) æ ¸å¿ƒå±‚</p>
<ul>
<li>Core Containerï¼šæ ¸å¿ƒå®¹å™¨ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯ spring æœ€æ ¸å¿ƒçš„æ¨¡å—ï¼Œå…¶ä»–çš„éƒ½éœ€è¦ä¾èµ–è¯¥æ¨¡å—ã€‚</li>
</ul>
<p>(2) AOP å±‚</p>
<ul>
<li>AOPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå®ƒä¾èµ–çš„æ˜¯æ ¸å¿ƒå±‚å®¹å™¨ï¼Œç›®çš„æ˜¯ == åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„å‰æä¸‹å¯¹å…¶è¿›è¡ŒåŠŸèƒ½çš„å¢åŠ ã€‚</li>
</ul>
<p>(3) Aspects:AOP æ˜¯æ€æƒ³ï¼ŒAspects æ˜¯å¯¹å…¶ AOP æ€æƒ³çš„å…·ä½“å®ç°</p>
<p>(3) æ•°æ®å±‚</p>
<ul>
<li>Data Access: æ•°æ®è®¿é—®å±‚ï¼ŒSpring å…¨å®¶æ¡¶ä¸­æœ‰å¯¹æ•°æ®è®¿é—®çš„å…·ä½“å®ç°æŠ€æœ¯</li>
<li>Data Integration: æ•°æ®é›†æˆï¼ŒSpring æ”¯æŒæ•´åˆå…¶ä»–çš„æ•°æ®å±‚è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ Mybatis</li>
<li>Transaction: äº‹åŠ¡ï¼Œspring ä¸­äº‹åŠ¡ç®¡ç†æ˜¯ spring AOP çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œæ˜¯ä¸€ä¸ªé‡ç‚¹ã€‚</li>
</ul>
<p>(4) Web å±‚</p>
<ul>
<li>è¿™ä¸€å±‚çš„å†…å®¹å°†åœ¨ springMVC æ¡†æ¶ä¸­å…·ä½“å­¦ä¹ </li>
</ul>
<p>(5) Test å±‚</p>
<ul>
<li>Spring ä¸»è¦æ•´åˆäº† Junit æ¥å®Œæˆå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•</li>
</ul>
<p>Spirng æ ¸å¿ƒæ¦‚å¿µå†…å®¹ä¸­ä¸»è¦åŒ…å« IOC/DIã€IOC å®¹å™¨å’Œ Beanã€‚</p>
<p>(1) ä¸šåŠ¡å±‚éœ€è¦è°ƒç”¨æ•°æ®å±‚çš„æ–¹æ³•ï¼Œå°±éœ€è¦åœ¨ä¸šåŠ¡å±‚ new æ•°æ®å±‚çš„å¯¹è±¡</p>
<p>(2) å¦‚æœæ•°æ®å±‚çš„å®ç°ç±»å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆä¸šåŠ¡å±‚çš„ä»£ç ä¹Ÿéœ€è¦è·Ÿç€æ”¹å˜ï¼Œå‘ç”Ÿå˜æ›´åï¼Œéƒ½éœ€è¦è¿›è¡Œç¼–è¯‘æ‰“åŒ…å’Œé‡éƒ¨ç½²</p>
<p>(3) æ‰€ä»¥ä»£ç åœ¨ç¼–å†™çš„è¿‡ç¨‹ä¸­å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼š<mark>è€¦åˆåº¦åé«˜</mark></p>
<p>å¦‚ä½•è§£å†³å‘¢</p>
<p><img data-src="java-SSM.assets/1629724206002.png" alt="1629724206002"></p>
<p>æ‰€ä»¥ç°åœ¨çš„é—®é¢˜å°±æ˜¯ï¼Œä¸šåŠ¡å±‚ä¸æƒ³ new å¯¹è±¡ï¼Œè¿è¡Œçš„æ—¶å€™åˆéœ€è¦è¿™ä¸ªå¯¹è±¡ï¼Œè¯¥å’‹åŠå‘¢</p>
<p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼ŒSpring å°±æå‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ:</p>
<ul>
<li>å°±æ˜¯åœ¨é€‚ç”¨å¯¹è±¡çš„æ—¶å€™ï¼Œåœ¨ç¨‹åºä¸­ä¸è¦ä¸»åŠ¨ä½¿ç”¨ new äº§ç”Ÿå¯¹è±¡ï¼Œè½¬æ¢ä¸ºç”±å¤–éƒ¨æä¾›å¯¹è±¡</li>
</ul>
<p>è¿™ç§å®ç°çš„æ€æƒ³å°±æ˜¯ spring çš„ä¸€ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µ</p>
<h2 id="1-ioc-iocå®¹å™¨-bran-di"><a class="markdownIt-Anchor" href="#1-ioc-iocå®¹å™¨-bran-di">#</a> 1 IOCã€IOC å®¹å™¨ã€Branã€DI</h2>
<ol>
<li>IOD (Inversion of Control) æ§åˆ¶åè½¬</li>
</ol>
<p>(1) ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼Ÿ</p>
<ul>
<li>ä½¿ç”¨å¯¹è±¡çš„æ—¶å€™ï¼Œç”±ä¸»åŠ¨ new äº§ç”Ÿå¯¹è±¡è½¬æ¢ä¸ºç”±å¤–éƒ¨æä¾›äº†å¯¹è±¡ï¼Œæ­¤è¿‡ç¨‹å°±æ˜¯å¯¹è±¡åˆ›å»ºæ§åˆ¶æƒç”±ç¨‹åºè½¬ç§»åˆ°å¤–éƒ¨ï¼Œè¿™ä¸ªæ€æƒ³å°±æ˜¯æ§åˆ¶åè½¬ã€‚</li>
</ul>
<p>(2) Spring å’Œ IOC ä¹‹é—´çš„å…³ç³»æ˜¯å•¥ï¼Ÿ</p>
<ul>
<li>Spring æŠ€æœ¯å¯¹ IOC æ€æƒ³è¿›è¡Œäº†å®ç°</li>
<li>spring æä¾›äº†ä¸€ä¸ªå®¹å™¨ï¼Œç§°ä¸º IOC å®¹å™¨ï¼Œç”¨æ¥å……å½“ IOC æ€æƒ³ä¸­çš„ â€œå¤–éƒ¨â€</li>
<li>IOC æ€æƒ³ä¸­çš„åˆ«äºº [å¤–éƒ¨] æŒ‡çš„å°±æ˜¯ spring ä¸­çš„ IOC å®¹å™¨</li>
</ul>
<p>(3) IOC å®¹å™¨çš„ä½œç”¨ä»¥åŠå†…éƒ¨å­˜æ”¾çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>IOC å®¹å™¨è´Ÿè´£çš„å°±æ˜¯å¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ç­‰ä¸€ç³»åˆ—å·¥ä½œï¼Œå…¶ä¸­å°±åŒ…å«äº†æ•°æ®å±‚ä¸šåŠ¡å±‚çš„å¯¹è±¡ã€‚</li>
<li>åˆ«åˆ›å»ºæˆ–è¢«ç®¡ç†çš„å¯¹è±¡åœ¨ IOC å®¹å™¨ä¸­ç»Ÿç§°ä¸º Bean</li>
<li>IOC å®¹å™¨ä¸­æ”¾çš„å°±æ˜¯ä¸€ä¸ªä¸ªçš„ Bean å¯¹è±¡</li>
</ul>
<p>(4) å½“ IOC å®¹å™¨ä¸­åˆ›å»ºå¥½ service å’Œ dao å¯¹è±¡ä¹‹åï¼Œç¨‹åºèƒ½æ­£ç¡®æ‰§è¡Œå—ï¼Ÿ</p>
<ul>
<li>ä¸è¡Œï¼Œå› ä¸º service è¿è¡Œå¾å¨…ä»¥æ¥ dao å¯¹è±¡</li>
<li>IOC å®¹å™¨ä¸­è™½ç„¶ service å’Œ dao å¯¹è±¡æ²¡æœ‰ä»»ä½•å…³ç³»</li>
<li>éœ€è¦æŠŠ dao å¯¹è±¡äº¤ç»™ serviceï¼Œä¹Ÿå°±æ˜¯è¯´è¦ç»‘å®š service å’Œ dao å¯¹è±¡ä¹‹é—´çš„å…³ç³»</li>
</ul>
<p>åƒè¿™ç§åœ¨å®¹å™¨ä¸­å»ºç«‹å¯¹åƒä¸å¯¹è±¡ä¹‹é—´çš„ç»‘å®šå…³ç³»å°±è¦ç”¨åˆ° DIï¼š</p>
<ol start="2">
<li>DI ä¾èµ–æ³¨å…¥</li>
</ol>
<p>(1) ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥å‘¢ï¼Ÿ</p>
<ul>
<li>åœ¨å®¹å™¨ä¸­å»ºç«‹ bean ä¸ bean ä¹‹é—´çš„ä¾èµ–å…³ç³»çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç§°ä¸ºä¾èµ–æ³¨å…¥</li>
</ul>
<p>ä¸šåŠ¡å±‚è¦ç”¨åˆ°æ•°æ®å±‚çš„ç±»å¯¹è±¡ï¼Œä»¥å‰éƒ½æ˜¯è‡ªå·± new çš„</p>
<p>ç°åœ¨è¦é åˆ«äºº [å¤–éƒ¨æŒ‡çš„å°±æ˜¯ IOC å®¹å™¨] æ¥æ³¨å…¥è¿›æ¥</p>
<p>(2) IOC å®¹å™¨ä¸­å“ªä¸€äº› bean ä¹‹é—´éœ€è¦å»ºç«‹ä¾èµ–å…³ç³»å‘¢ï¼Ÿ</p>
<ul>
<li>è¿™ä¸ªéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚æå‰å»ºç«‹å¥½å…³ç³»ï¼Œå¦‚ä¸šåŠ¡å±‚éœ€è¦ä¾èµ–æ•°æ®å±‚ï¼Œservice å°±è¦å’Œ dao å»ºç«‹ä¾èµ–å…³ç³»</li>
</ul>
<h3 id="iocå…¥é—¨æ¡ˆä¾‹çš„å®ç°"><a class="markdownIt-Anchor" href="#iocå…¥é—¨æ¡ˆä¾‹çš„å®ç°">#</a> IOC å…¥é—¨æ¡ˆä¾‹çš„å®ç°</h3>
<p><strong>æ·»åŠ æ¡ˆä¾‹ä¸­éœ€è¦çš„ç±»ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookDaoImpl</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ resource ä¸‹æ·»åŠ  spring é…ç½®æ–‡ä»¶ applicationContext.xmlï¼Œå¹¶å®Œæˆ bean çš„é…ç½®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;!--beanæ ‡ç­¾æ ‡ç¤ºé…ç½®bean</span><br><span class="line">    	idå±æ€§æ ‡ç¤ºç»™beanèµ·åå­—</span><br><span class="line">    	classå±æ€§è¡¨ç¤ºç»™beanå®šä¹‰ç±»å‹</span><br><span class="line">	--&gt;</span><br><span class="line">	&lt;bean id=<span class="string">&quot;bookDao&quot;</span> class=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;bookService&quot;</span> class=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>è·å– IOC å®¹å™¨ğŸš¿</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–IOCå®¹å™¨</span></span><br><span class="line">        ApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) context.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        BookService bookService= (BookService) context.getBean(<span class="string">&quot;bookService&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">        bookService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>DI å…¥é—¨æ¡ˆä¾‹</p>
<blockquote>
<p>éœ€æ±‚ï¼šåŸºäº IOC å…¥é—¨æ¡ˆä¾‹ï¼Œåœ¨ BookServiceImpl ç±»ä¸­åˆ é™¤ new å¯¹è±¡çš„æ–¹å¼ï¼Œä½¿ç”¨ Spring çš„ DI å®Œæˆ Dao å±‚çš„æ³¨å…¥</p>
<p>1. åˆ é™¤ä¸šåŠ¡å±‚ä¸­ä½¿ç”¨ new çš„æ–¹å¼åˆ›å»ºçš„ dao å¯¹è±¡</p>
<p>2. åœ¨ä¸šåŠ¡å±‚æä¾› BookDao çš„ setter æ–¹æ³•</p>
<p>3. åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–æ³¨å…¥çš„é…ç½® (property)</p>
<p>4. è¿è¡Œç¨‹åºè°ƒç”¨æ–¹æ³•</p>
</blockquote>
<h3 id="iocç›¸å…³çš„å†…å®¹"><a class="markdownIt-Anchor" href="#iocç›¸å…³çš„å†…å®¹">#</a> IOC ç›¸å…³çš„å†…å®¹</h3>
<p>bean åŸºç¡€é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>bean çš„ name å±æ€§</p>
<p>é…ç½®åˆ«å</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span>/&gt;</span>    ä»¥ç©ºæ ¼or,or;åˆ†éš”å¼€æ¥ï¼Œä½œç”¨æ•ˆæœè·Ÿidä¸€æ ·</span><br></pre></td></tr></table></figure>
<h2 id="2-beanä½œç”¨èŒƒå›´scopeé…ç½®"><a class="markdownIt-Anchor" href="#2-beanä½œç”¨èŒƒå›´scopeé…ç½®">#</a> 2 bean ä½œç”¨èŒƒå›´ scope é…ç½®</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scope=&quot;prototype&quot;  è¿™ä¸ªå°±æ˜¯éå•ä¾‹çš„</span><br><span class="line">scope=&quot;singleton&quot;  è¿™ä¸ªå°±æ˜¯å•ä¾‹çš„</span><br></pre></td></tr></table></figure>
<p>åœ¨é»˜è®¤çš„æƒ…å†µä¹‹ä¸‹ï¼Œspring åˆ›å»ºçš„ bean å¯¹è±¡éƒ½æ˜¯å•ä¾‹çš„</p>
<h3 id="scopeä½¿ç”¨çš„æ„Ÿå—"><a class="markdownIt-Anchor" href="#scopeä½¿ç”¨çš„æ„Ÿå—">#</a> scope ä½¿ç”¨çš„æ„Ÿå—</h3>
<p>ä¸ºä»€ä¹ˆ bean é»˜è®¤çš„æƒ…å†µä¹‹ä¸‹éƒ½æ˜¯ä¸ºå•ä¾‹çš„å‘¢ï¼Ÿ</p>
<ul>
<li>
<p>bean ä¸ºå•ä¾‹çš„æ„æ€å°±æ˜¯è¯´åœ¨ spring çš„ IOC å®¹å™¨ä¸­åªä¼šæœ‰è¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡</p>
</li>
<li>
<p>bean å¯¹è±¡åªæœ‰ä¸€ä¸ªå°±é¿å…äº†å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºè·Ÿé”€æ¯ï¼Œè¾¾åˆ°äº† bean å¯¹è±¡çš„å¤ç”¨ï¼Œæ€§èƒ½é«˜ã€‚</p>
</li>
</ul>
<p>bean åœ¨å®¹å™¨ä¸­æ˜¯å•ä¾‹çš„è¯ï¼Œä¼šä¸ä¼šäº§ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</p>
<ul>
<li>å¦‚æœå¯¹è±¡æ˜¯æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œå³è¯¥å¯¹è±¡ä¸­æœ‰æˆå‘˜å˜é‡ç”¨æ¥å­˜å‚¨æ•°æ®çš„ã€‚å› ä¸ºæ‰€æœ‰çš„è¯·æ±‚å…±ç”¨ä¸€ä¸ª bean å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
<li>å¦‚æœå¯¹è±¡æ˜¯æ— çŠ¶æ€çš„ï¼Œå³è¯¥å¯¹è±¡æ²¡æœ‰æˆå‘˜å˜é‡æ²¡æœ‰è¿›è¡Œæ•°æ®å­˜å‚¨çš„ï¼Œå› ä¸ºæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡åœ¨æ–¹æ³•è°ƒç”¨ä¹‹åä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜</li>
</ul>
<p>å“ªäº› bean å¯¹è±¡é€‚åˆäº¤ç»™å®¹å™¨æ¥è¿›è¡Œç®¡ç†</p>
<ul>
<li>è¡¨ç°å±‚å¯¹è±¡</li>
<li>ä¸šåŠ¡å±‚å¯¹è±¡</li>
<li>æ•°æ®å±‚å¯¹è±¡</li>
<li>å·¥å…·å¯¹è±¡</li>
</ul>
<p>å“ªäº› bean å¯¹è±¡ä¸é€‚åˆäº¤ç»™å®¹å™¨æ¥è¿›è¡Œç®¡ç†</p>
<ul>
<li>å°è£…æ˜¯é‡Œçš„åŸŸå¯¹è±¡ï¼Œå› ä¸ºä¼šå¼•å‘çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸é€‚åˆã€‚</li>
</ul>
<p>bean åŸºç¡€é…ç½®çš„å°ç»“</p>
<p>å…³äº bean çš„åŸºç¡€é…ç½®ä¸­</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;beançš„å”¯ä¸€æ ‡è¯†&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;beançš„ç±»å…¨å&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">scope</span>=<span class="string">&quot;beançš„ä½œç”¨èŒƒå›´,æœ‰singleton(é»˜è®¤)å’Œpropertype&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">name</span>=<span class="string">&quot;ä¸ºweanå–å¾—åˆ«å&quot;</span></span></span><br><span class="line"><span class="tag">&quot;&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-beançš„å®ä¾‹åŒ–"><a class="markdownIt-Anchor" href="#3-beançš„å®ä¾‹åŒ–">#</a> 3 bean çš„å®ä¾‹åŒ–</h2>
<p>å®ä¾‹åŒ–çš„ä¸‰ç§æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ï¼Œé™æ€æ–¹æ³•å’Œå®ä¾‹å·¥å‚</p>
<p>bean æœ¬è´¨ä¸Šå°±æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡åœ¨ new çš„æ—¶å€™ä¼šä½¿ç”¨æ„é€ æ–¹æ³•å®Œæˆï¼Œé‚£ä¹ˆåˆ›å»º bean ä¹Ÿæ˜¯ä½¿ç”¨æ„é€ æ–¹æ³•æ¥å®Œæˆçš„ã€‚</p>
<p>å°† BookDaoImpl ä¸­çš„æ„é€ æ–¹æ³•è®¾ç½®ä¸º private</p>
<p>å¹¶ä¸”åœ¨é‡Œé¢æ‰“å°ä¸€å¥è¯æ¥æµ‹è¯•</p>
<p>èƒ½æ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜å†…éƒ¨èµ°çš„ä¾æ—§æ˜¯æ„é€ å‡½æ•°ï¼Œèƒ½å¤Ÿè®¿é—®ç±»ä¸­çš„ç§æœ‰æ„é€ æ–¹æ³•ï¼Œæ˜¾è€Œæ˜“è§ spring åº•å±‚ç”¨çš„å°±æ˜¯åå°„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BookDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao constructor is running ....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>
<p>æ„é€ å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°æµ‹è¯•</p>
<p>ç¨‹åºä¼šæŠ¥é”™ï¼Œè¯´æ˜ spring åº•å±‚ä½¿ç”¨çš„æ˜¯ç±»çš„æ— å‚æ„é€ æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BookDaoImpl</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao constructor is running ....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ†æ spring çš„é”™è¯¯ä¿¡æ¯</p>
<p>spring çš„æŠ¥é”™ä¿¡æ¯æ¥å­¦ä¸€å­¦å¦‚é˜…è¯»ã€‚</p>
<ul>
<li>é”™è¯¯ä¿¡æ¯ä»ä¸‹å¾€ä¸Šæ¥æŸ¥çœ‹ï¼Œå› ä¸ºä¸Šé¢çš„é”™è¯¯å¤§éƒ½æ˜¯è¥¿é¢é”™è¯¯çš„ä¸€ä¸ªåŒ…è£…ï¼Œæœ€æ ¸å¿ƒé”™è¯¯æ˜¯åœ¨æœ€ä¸‹é¢</li>
</ul>
<h3 id="é™æ€å·¥å‚å®ä¾‹åŒ–"><a class="markdownIt-Anchor" href="#é™æ€å·¥å‚å®ä¾‹åŒ–">#</a> é™æ€å·¥å‚å®ä¾‹åŒ–</h3>
<p>(1) å‡†å¤‡ä¸€ä¸ª OrderDao å’Œ OrderDaoImpl ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">OrderDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;order dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(2) åˆ›å»ºä¸€ä¸ªå·¥å‚ç±» OrderDaoFactory å¹¶æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é™æ€å·¥å‚åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> OrderDao <span class="title function_">getOrderDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(3) ç¼–å†™ AppForInstanceOrder è¿è¡Œç±»ï¼Œåœ¨ç±»ä¸­åˆ›å»ºå·¥å‚æ¥è·å–å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceOrder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡é™æ€å·¥å‚åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> OrderDaoFactory.getOrderDao();</span><br><span class="line">        orderDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(1) äº¤ç»™ spring æ¥è¿›è¡Œç®¡ç†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orderDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.OrderDaoFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getOrderDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>(2) åœ¨ AppForInstanceOrder è¿è¡Œç±»ï¼Œä½¿ç”¨ä» IOC å®¹å™¨ä¸­è·å– bean çš„æ–¹æ³•è¿›è¡Œè¿è¡Œæµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceOrder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ApplicationContext ctx=<span class="keyword">new</span> <span class="title class_">ClassPathxmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">OrderDao</span> <span class="variable">orderDao</span> <span class="operator">=</span> (OrderDao) ctx.getBean(<span class="string">&quot;orderDao&quot;</span>);</span><br><span class="line"></span><br><span class="line">        orderDao.save();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é™æ€å·¥å‚çš„æ–¹å¼åè€Œæ›´åŠ å¤æ‚</li>
</ul>
<p>ä¸»è¦çš„åŸå› å°±æ˜¯ï¼š</p>
<ul>
<li>åœ¨å·¥å‚çš„é™æ€æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é™¤äº† new å¯¹è±¡ä¹‹å¤–è¿˜å¯ä»¥åšå…¶ä»–çš„ä¸€äº›ä¸šåŠ¡æ“ä½œï¼Œè¿™äº›æ“ä½œå¿…ä¸å¯å°‘ï¼Œå¦‚ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDaoFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> OrderDao <span class="title function_">getOrderDao</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;factory setup....&quot;</span>);<span class="comment">//æ¨¡æ‹Ÿå¿…è¦çš„ä¸šåŠ¡æ“ä½œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><mark>é™æ€å·¥å‚ä»¥äº†è§£ä¸ºä¸»</mark></p>
<p>å®ä¾‹åŒ–å·¥å‚ä¸ FactoryBean</p>
<p>å‰é¢çš„ä¸‰ä¸ªç±»æ“¦ä¸å¤šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªè¦æŠŠå…¶ä¸­çš„é™æ€æ–¹æ³•æ”¹ç¼–æˆä¸ºæ™®é€šçš„æ–¹æ³•å°±è¡Œäº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå®ä¾‹å·¥å‚å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserDaoFactory</span> <span class="variable">userDaoFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoFactory</span>();</span><br><span class="line">        <span class="comment">//é€šè¿‡å®ä¾‹å·¥å‚å¯¹è±¡åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> userDaoFactory.getUserDao();</span><br><span class="line">        userDao.save();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±æ˜¯äº¤ç»™ spring æ¥ç®¡ç†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userFactory&quot;</span> <span class="attr">calss</span>=<span class="string">&quot;com.ityueheng.foctory.UserDaoFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;UserFactory&quot;</span>/&gt;</span> </span><br></pre></td></tr></table></figure>
<p>å®ä¾‹åŒ–å·¥å‚è¿è¡Œçš„é¡ºåºå°±æ˜¯ï¼š</p>
<ul>
<li>
<p>åˆ›å»ºå®ä¾‹åŒ–å·¥å‚å¯¹è±¡ï¼Œå¯¹åº”çš„ç¬¬ä¸€è¡Œé…ç½®</p>
</li>
<li>
<p>è°ƒç”¨å¯¹è±¡ä¸­çš„æ–¹æ³•æ¥åˆ›å»º beanï¼Œå¯¹åº”çš„æ˜¯ç¬¬äºŒè¡Œé…ç½®</p>
</li>
</ul>
<p>factory-beanï¼šå·¥å‚çš„å®ä¾‹åŒ–å¯¹è±¡</p>
<p>factory-methodï¼šå·¥å‚å¯¹è±¡ä¸­çš„å…·ä½“åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•åã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForInstanceUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">            <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) ctx.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>FactoryBean çš„ä½¿ç”¨</p>
<p>å…·ä½“çš„ä½¿ç”¨æ­¥éª¤ä¸ºï¼š</p>
<p>1ï¼‰åˆ›å»ºä¸€ä¸ª UserDaoFactoryBean çš„ç±»ï¼Œå®ç° FactoryBean æ¥å£ï¼Œé‡å†™æ¥å£ä¸­çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;UserDao&gt; &#123;</span><br><span class="line">    <span class="comment">//ä»£æ›¿åŸå§‹å®ä¾‹å·¥å‚ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›æ‰€åˆ›å»ºç±»çš„Classå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> UserDao.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="beançš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#beançš„ç”Ÿå‘½å‘¨æœŸ">#</a> bean çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<ul>
<li>é¦–å…ˆç†è§£ä¸‹ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿ
<ul>
<li>ä»åˆ›å»ºåˆ°æ¶ˆäº¡çš„å®Œæ•´è¿‡ç¨‹ï¼Œä¾‹å¦‚äººä»å‡ºç”Ÿåˆ°æ­»äº¡çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</li>
</ul>
</li>
<li>bean ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ
<ul>
<li>bean å¯¹è±¡ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä½“è¿‡ç¨‹ã€‚</li>
</ul>
</li>
<li>bean ç”Ÿå‘½å‘¨æœŸæ§åˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ
<ul>
<li>åœ¨ bean åˆ›å»ºååˆ°é”€æ¯å‰åšä¸€äº›äº‹æƒ…ã€‚</li>
</ul>
</li>
</ul>
<h4 id="ç¯å¢ƒå‡†å¤‡"><a class="markdownIt-Anchor" href="#ç¯å¢ƒå‡†å¤‡">#</a> ç¯å¢ƒå‡†å¤‡</h4>
<ul>
<li>åˆ›å»ºä¸€ä¸ª Maven é¡¹ç›®</li>
<li>pom.xml æ·»åŠ ä¾èµ–</li>
<li>resources ä¸‹æ·»åŠ  spring çš„é…ç½®æ–‡ä»¶ applicationContext.xml</li>
</ul>
<p>(1) é¡¹ç›®ä¸­æ·»åŠ  BookDaoã€BookDaoImplã€BookService å’Œ BookServiceImpl ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(2) resources ä¸‹æä¾› spring çš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>(3) ç¼–å†™ AppForLifeCycle è¿è¡Œç±»ï¼ŒåŠ è½½ Spring çš„ IOC å®¹å™¨ï¼Œå¹¶ä»ä¸­è·å–å¯¹åº”çš„ bean å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForLifeCycle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">        	<span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿå‘½å‘¨æœŸè®¾ç½®"><a class="markdownIt-Anchor" href="#ç”Ÿå‘½å‘¨æœŸè®¾ç½®">#</a> ç”Ÿå‘½å‘¨æœŸè®¾ç½®</h4>
<p>åœ¨ä¸Šé¢è¿™ä¸ªç¯å¢ƒä¸­æ¥ä¸º BookDao æ·»åŠ ç”Ÿå‘½å‘¨æœŸçš„æ§åˆ¶æ–¹æ³•ï¼Œå…·ä½“çš„æ§åˆ¶æœ‰ä¸¤ä¸ªé˜¶æ®µ:</p>
<ul>
<li>bean åˆ›å»ºä¹‹åï¼Œæƒ³è¦æ·»åŠ å†…å®¹ï¼Œæ¯”å¦‚ç”¨æ¥åˆå§‹åŒ–éœ€è¦ç”¨åˆ°èµ„æº</li>
<li>bean é”€æ¯ä¹‹å‰ï¼Œæƒ³è¦æ·»åŠ å†…å®¹ï¼Œæ¯”å¦‚ç”¨æ¥é‡Šæ”¾ç”¨åˆ°çš„èµ„æº</li>
</ul>
<h5 id="æ­¥éª¤1æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a class="markdownIt-Anchor" href="#æ­¥éª¤1æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•">#</a> æ­¥éª¤ 1: æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</h5>
<p>é’ˆå¯¹è¿™ä¸¤ä¸ªé˜¶æ®µï¼ŒBooDaoImpl ç±»ä¸­åˆ†åˆ«æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œ<mark>æ–¹æ³•åä»»æ„</mark></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¡¨ç¤ºbeanåˆå§‹åŒ–å¯¹åº”çš„æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¡¨ç¤ºbeané”€æ¯å‰å¯¹åº”çš„æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destory...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤2é…ç½®ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#æ­¥éª¤2é…ç½®ç”Ÿå‘½å‘¨æœŸ">#</a> æ­¥éª¤ 2: é…ç½®ç”Ÿå‘½å‘¨æœŸ</h5>
<p>åœ¨é…ç½®æ–‡ä»¶æ·»åŠ é…ç½®ï¼Œå¦‚ä¸‹:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destory&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤3è¿è¡Œç¨‹åº"><a class="markdownIt-Anchor" href="#æ­¥éª¤3è¿è¡Œç¨‹åº">#</a> æ­¥éª¤ 3: è¿è¡Œç¨‹åº</h5>
<p>è¿è¡Œ AppForLifeCycle æ‰“å°ç»“æœä¸º:</p>
<p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œinit æ–¹æ³•æ‰§è¡Œäº†ï¼Œä½†æ˜¯ destroy æ–¹æ³•å´æœªæ‰§è¡Œ</p>
<ul>
<li>Spring çš„ IOC å®¹å™¨æ˜¯è¿è¡Œåœ¨ JVM ä¸­</li>
<li>è¿è¡Œ main æ–¹æ³•åï¼ŒJVM å¯åŠ¨ï¼ŒSpring åŠ è½½é…ç½®æ–‡ä»¶ç”Ÿæˆ IOC å®¹å™¨ï¼Œä»å®¹å™¨è·å– bean å¯¹è±¡ï¼Œç„¶åè°ƒæ–¹æ³•æ‰§è¡Œ</li>
<li>main æ–¹æ³•æ‰§è¡Œå®Œåï¼ŒJVM é€€å‡ºï¼Œè¿™ä¸ªæ—¶å€™ IOC å®¹å™¨ä¸­çš„ bean è¿˜æ²¡æœ‰æ¥å¾—åŠé”€æ¯å°±å·²ç»ç»“æŸäº†</li>
<li>æ‰€ä»¥æ²¡æœ‰è°ƒç”¨å¯¹åº”çš„ destroy æ–¹æ³•</li>
</ul>
<h4 id="closeå…³é—­å®¹å™¨"><a class="markdownIt-Anchor" href="#closeå…³é—­å®¹å™¨">#</a> close å…³é—­å®¹å™¨</h4>
<ul>
<li>
<p>ApplicationContext ä¸­æ²¡æœ‰ close æ–¹æ³•</p>
</li>
<li>
<p>éœ€è¦å°† ApplicationContext æ›´æ¢æˆ ClassPathXmlApplicationContext</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ClassPathXmlApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">    <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è°ƒç”¨ ctx çš„ close () æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.close();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="æ³¨å†Œé’©å­å…³é—­å®¹å™¨"><a class="markdownIt-Anchor" href="#æ³¨å†Œé’©å­å…³é—­å®¹å™¨">#</a> æ³¨å†Œé’©å­å…³é—­å®¹å™¨</h4>
<ul>
<li>
<p>åœ¨å®¹å™¨æœªå…³é—­ä¹‹å‰ï¼Œæå‰è®¾ç½®å¥½å›è°ƒå‡½æ•°ï¼Œè®© JVM åœ¨é€€å‡ºä¹‹å‰å›è°ƒæ­¤å‡½æ•°æ¥å…³é—­å®¹å™¨</p>
</li>
<li>
<p>è°ƒç”¨ ctx çš„ registerShutdownHook () æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.registerShutdownHook();</span><br></pre></td></tr></table></figure>
<p>** æ³¨æ„:**registerShutdownHook åœ¨ ApplicationContext ä¸­ä¹Ÿæ²¡æœ‰</p>
</li>
<li>
<p>è¿è¡Œåï¼ŒæŸ¥è¯¢æ‰“å°ç»“æœ</p>
</li>
</ul>
<p>ç›¸åŒç‚¹ï¼šè¿™ä¸¤ç§éƒ½èƒ½ç”¨æ¥å…³é—­å®¹å™¨</p>
<p>ä¸åŒç‚¹:close () æ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™å…³é—­ï¼ŒregisterShutdownHook () æ˜¯åœ¨ JVM é€€å‡ºå‰è°ƒç”¨å…³é—­ã€‚</p>
<p>åˆ†æä¸Šé¢çš„å®ç°è¿‡ç¨‹ï¼Œä¼šå‘ç°æ·»åŠ åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼Œå³éœ€è¦ç¼–ç ä¹Ÿéœ€è¦é…ç½®ï¼Œå®ç°èµ·æ¥æ­¥éª¤æ¯”è¾ƒå¤šä¹Ÿæ¯”è¾ƒä¹±ã€‚</p>
<p>Spring æä¾›äº†ä¸¤ä¸ªæ¥å£æ¥å®Œæˆç”Ÿå‘½å‘¨æœŸçš„æ§åˆ¶ï¼Œå¥½å¤„æ˜¯å¯ä»¥ä¸ç”¨å†è¿›è¡Œé…ç½® <code>init-method</code>  å’Œ <code>destroy-method</code></p>
<p>æ¥ä¸‹æ¥åœ¨ BookServiceImpl å®Œæˆè¿™ä¸¤ä¸ªæ¥å£çš„ä½¿ç”¨:</p>
<p>ä¿®æ”¹ BookServiceImpl ç±»ï¼Œæ·»åŠ ä¸¤ä¸ªæ¥å£ <code>InitializingBean</code> ï¼Œ  <code>DisposableBean</code>  å¹¶å®ç°æ¥å£ä¸­çš„ä¸¤ä¸ªæ–¹æ³• <code>afterPropertiesSet</code>  å’Œ <code>destroy</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>, InitializingBean, DisposableBean &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save(); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service destroy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å°ç»†èŠ‚</strong></p>
<ul>
<li>
<p>å¯¹äº InitializingBean æ¥å£ä¸­çš„ afterPropertiesSet æ–¹æ³•ï¼Œç¿»è¯‘è¿‡æ¥ä¸º <code>å±æ€§è®¾ç½®ä¹‹å</code> ã€‚</p>
</li>
<li>
<p>å¯¹äº BookServiceImpl æ¥è¯´ï¼ŒbookDao æ˜¯å®ƒçš„ä¸€ä¸ªå±æ€§</p>
</li>
<li>
<p>setBookDao æ–¹æ³•æ˜¯ Spring çš„ IOC å®¹å™¨ä¸ºå…¶æ³¨å…¥å±æ€§çš„æ–¹æ³•</p>
<ul>
<li>
<p>ä»æ–¹æ³•ååˆ†æï¼ŒçŒœæƒ³åº”è¯¥æ˜¯ setBookDao æ–¹æ³•å…ˆæ‰§è¡Œ</p>
</li>
<li>
<p>éªŒè¯æ€è·¯ï¼Œåœ¨ setBookDao æ–¹æ³•ä¸­æ·»åŠ ä¸€å¥è¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;set .....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é‡æ–°è¿è¡Œ AppForLifeCycleï¼Œæ‰“å°ç»“æœå¦‚ä¸‹:</p>
</li>
</ul>
</li>
</ul>
<h4 id="beanç”Ÿå‘½å‘¨æœŸå°ç»“"><a class="markdownIt-Anchor" href="#beanç”Ÿå‘½å‘¨æœŸå°ç»“">#</a> bean ç”Ÿå‘½å‘¨æœŸå°ç»“</h4>
<p>(1) å…³äº Spring ä¸­å¯¹ bean ç”Ÿå‘½å‘¨æœŸæ§åˆ¶æä¾›äº†ä¸¤ç§æ–¹å¼:</p>
<ul>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ bean æ ‡ç­¾ä¸­æ·»åŠ  <code>init-method</code>  å’Œ <code>destroy-method</code>  å±æ€§</li>
<li>ç±»å®ç° <code>InitializingBean</code>  ä¸ <code>DisposableBean</code>  æ¥å£</li>
</ul>
<p>(2) å¯¹äº bean çš„ç”Ÿå‘½å‘¨æœŸæ§åˆ¶åœ¨ bean çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­æ‰€å¤„çš„ä½ç½®å¦‚ä¸‹:</p>
<ul>
<li>åˆå§‹åŒ–å®¹å™¨
<ul>
<li>1. åˆ›å»ºå¯¹è±¡ (å†…å­˜åˆ†é…)</li>
<li>2. æ‰§è¡Œæ„é€ æ–¹æ³•</li>
<li>3. æ‰§è¡Œå±æ€§æ³¨å…¥ (set æ“ä½œ)</li>
<li><mark>4. æ‰§è¡Œ bean åˆå§‹åŒ–æ–¹æ³•</mark></li>
</ul>
</li>
<li>ä½¿ç”¨ bean
<ul>
<li>1. æ‰§è¡Œä¸šåŠ¡æ“ä½œ</li>
</ul>
</li>
<li>å…³é—­ / é”€æ¯å®¹å™¨
<ul>
<li><mark>1. æ‰§è¡Œ bean é”€æ¯æ–¹æ³•</mark></li>
</ul>
</li>
</ul>
<p>(3) å…³é—­å®¹å™¨çš„ä¸¤ç§æ–¹å¼:</p>
<ul>
<li>ConfigurableApplicationContext æ˜¯ ApplicationContext çš„å­ç±»
<ul>
<li>close () æ–¹æ³•</li>
<li>registerShutdownHook () æ–¹æ³•</li>
</ul>
</li>
</ul>
<h2 id="4-diç›¸å…³å†…å®¹"><a class="markdownIt-Anchor" href="#4-diç›¸å…³å†…å®¹">#</a> 4 DI ç›¸å…³å†…å®¹</h2>
<h3 id="setteræ³¨å…¥"><a class="markdownIt-Anchor" href="#setteræ³¨å…¥">#</a> Setter æ³¨å…¥</h3>
<p>åœ¨ bean ä¸­å®šä¹‰å¼•ç”¨ç±»å‹å±æ€§ï¼Œå¹¶æä¾›å¯è®¿é—®çš„ set æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®ä¸­ä½¿ç”¨ property æ ‡ç­¾ ref å±æ€§æ³¨å…¥å¼•ç”¨ç±»å‹å¯¹è±¡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.imipl.BookDaoImpl&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼•ç”¨ç±»å‹çš„æ³¨å…¥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>setter æ–¹å¼çš„æ³¨å…¥</p>
<p>å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹çš„ä½¿ç”¨çš„æ˜¯<property name="" ref=""/></p>
<p>å¯¹äºç®€å•æ•°æ®ç±»å‹çš„ä½¿ç”¨å°±æ˜¯<property name="" value=""/></p>
<h2 id="5-æ„é€ å™¨çš„æ³¨å…¥"><a class="markdownIt-Anchor" href="#5-æ„é€ å™¨çš„æ³¨å…¥">#</a> 5 æ„é€ å™¨çš„æ³¨å…¥</h2>
<p>æ„é€ å™¨æ³¨å…¥ä¹Ÿå°±æ˜¯æ„é€ æ–¹æ³•çš„æ³¨å…¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String databaseName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> connectionNum;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user dao save ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookDao</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ„é€ å™¨æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</p>
<blockquote>
<p>éœ€æ±‚ï¼šå°† BookServiceImpl ç±»ä¸­çš„ bookDao ä¿®æ”¹æˆä¸ºä½¿ç”¨æ„é€ å™¨çš„æ–¹å¼æ³¨å…¥</p>
<ol>
<li>å°† bookDao ä¸­çš„ setter æ–¹æ³•åˆ é™¤</li>
<li>æ·»åŠ å¸¦æœ‰ bookDao å‚æ•°çš„æ„é€ æ–¹æ³•</li>
<li>åœ¨ applicationContext.xml ä¸­è¿›è¡Œé…ç½®</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookServiceImpl</span><span class="params">(BookDao bookDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.ityueheng.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.ityueheng.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">       é‡ç‚¹ï¼š <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ ‡ç­¾<constructor-arg>ä¸­</p>
<ul>
<li>name å±æ€§å¯¹åº”çš„å€¼ä¸ºæ„é€ å‡½æ•°ä¸­çš„æ–¹æ³•å½¢å‚çš„å‚æ•°åï¼Œå¿…é¡»è¦ä¿æŒä¸€è‡´</li>
<li>ref å±æ€§æŒ‡å‘çš„æ˜¯ spring çš„ IOC å®¹å™¨ä¸­çš„å…¶ä»– bean å¯¹è±¡</li>
</ul>
<p>æ„é€ å™¨ä¸­æ³¨å…¥å¤šä¸ªå¼•ç”¨çš„æ•°æ®ç±»å‹</p>
<blockquote>
<p>éœ€æ±‚ï¼šåœ¨ BookServiceImpl ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥å¤šä¸ªå¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ userDao</p>
<ol>
<li>
<p>å£°æ˜ userDao å±æ€§</p>
</li>
<li>
<p>ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰ bookDao å’Œ userDao å‚æ•°çš„æ„é€ å‡½æ•°</p>
</li>
<li>
<p>åœ¨ applicationContext.xml ä¸­é…ç½®æ³¨å…¥</p>
</li>
</ol>
</blockquote>
<p>1.<strong> æä¾›å¤šä¸ªå±æ€§çš„æ„é€ å‡½æ•°</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookServiceImpl</span><span class="params">(BookDao bookDao,UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao = bookDao;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book service save ...&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ„é€ å™¨æ³¨å…¥å¤šä¸ªç®€å•æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#æ„é€ å™¨æ³¨å…¥å¤šä¸ªç®€å•æ•°æ®ç±»å‹">#</a> æ„é€ å™¨æ³¨å…¥å¤šä¸ªç®€å•æ•°æ®ç±»å‹</h4>
<blockquote>
<p>éœ€æ±‚ï¼šåœ¨ BookDaoImpl ä¸­ï¼Œä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ databaseName å’Œ connectionNum ä¸¤ä¸ªå‚æ•°ã€‚</p>
<p>å‚è€ƒå¼•ç”¨æ•°æ®ç±»å‹çš„æ³¨å…¥ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºå…·ä½“çš„æ­¥éª¤ä¸º:</p>
<p>1. æä¾›ä¸€ä¸ªåŒ…å«è¿™ä¸¤ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•</p>
<p>2. åœ¨ applicationContext.xml ä¸­è¿›è¡Œæ³¨å…¥é…ç½®</p>
</blockquote>
<h5 id="æ­¥éª¤1æ·»åŠ å¤šä¸ªç®€å•å±æ€§å¹¶æä¾›æ„é€ æ–¹æ³•"><a class="markdownIt-Anchor" href="#æ­¥éª¤1æ·»åŠ å¤šä¸ªç®€å•å±æ€§å¹¶æä¾›æ„é€ æ–¹æ³•">#</a> æ­¥éª¤ 1: æ·»åŠ å¤šä¸ªç®€å•å±æ€§å¹¶æä¾›æ„é€ æ–¹æ³•</h5>
<p>ä¿®æ”¹ BookDaoImpl ç±»ï¼Œæ·»åŠ æ„é€ æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String databaseName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> connectionNum;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookDaoImpl</span><span class="params">(String databaseName, <span class="type">int</span> connectionNum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.databaseName = databaseName;</span><br><span class="line">        <span class="built_in">this</span>.connectionNum = connectionNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao save ...&quot;</span>+databaseName+<span class="string">&quot;,&quot;</span>+connectionNum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤2é…ç½®å®Œæˆå¤šä¸ªå±æ€§æ„é€ å™¨æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ­¥éª¤2é…ç½®å®Œæˆå¤šä¸ªå±æ€§æ„é€ å™¨æ³¨å…¥">#</a> æ­¥éª¤ 2: é…ç½®å®Œæˆå¤šä¸ªå±æ€§æ„é€ å™¨æ³¨å…¥</h5>
<p>åœ¨ applicationContext.xml ä¸­è¿›è¡Œæ³¨å…¥é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;databaseName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;connectionNum&quot;</span> <span class="attr">value</span>=<span class="string">&quot;666&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>** è¯´æ˜:** è¿™ä¸¤ä¸ª <code>&lt;contructor-arg&gt;</code>  çš„é…ç½®é¡ºåºå¯ä»¥ä»»æ„</p>
<h5 id="æ­¥éª¤3è¿è¡Œç¨‹åº-2"><a class="markdownIt-Anchor" href="#æ­¥éª¤3è¿è¡Œç¨‹åº-2">#</a> æ­¥éª¤ 3: è¿è¡Œç¨‹åº</h5>
<p>è¿è¡Œ AppForDIConstructor ç±»ï¼ŒæŸ¥çœ‹ç»“æœ</p>
<p>ä¸Šé¢å·²ç»å®Œæˆäº†æ„é€ å‡½æ•°æ³¨å…¥çš„åŸºæœ¬ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜:</p>
<ul>
<li>å½“æ„é€ å‡½æ•°ä¸­æ–¹æ³•çš„å‚æ•°åå‘ç”Ÿå˜åŒ–åï¼Œé…ç½®æ–‡ä»¶ä¸­çš„ name å±æ€§ä¹Ÿéœ€è¦è·Ÿç€å˜</li>
<li>è¿™ä¸¤å—å­˜åœ¨ç´§è€¦åˆ</li>
</ul>
<p>æ–¹å¼ä¸€ï¼šåˆ é™¤ name å±æ€§ï¼Œæ·»åŠ  type å±æ€§ï¼Œç„¶åæŒ‰ç…§ç±»å‹æ³¨å…¥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;int&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™ç§æ–¹å¼å¯ä»¥è§£å†³æ„é€ å‡½æ•°å½¢å‚åå‘ç”Ÿå˜åŒ–å¸¦æ¥çš„è€¦åˆæ€§</li>
<li>ä½†æ˜¯å¦‚æœæ„é€ æ–¹æ³•å‚æ•°ä¸­æœ‰ç±»å‹ç›¸åŒçš„å‚æ•°ï¼Œè¿™ç§æ–¹å¼ä¸å¤ªé€‚åˆ</li>
</ul>
<p>æ–¹å¼äºŒï¼šåˆ é™¤ type å±æ€§ï¼Œæ·»åŠ  index å±æ€§ï¼ŒæŒ‰ç…§ç´¢å¼•ä¸‹æ ‡æ³¨å…¥ï¼Œä¸‹æ ‡æ˜¯ä»é›¶å¼€å§‹çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;bookDaO class=&quot;com.ityueheng.dao.impl.BookDaoImpl&quot;&gt;</span><br><span class="line">  &lt;constructor-arg index=&quot;0&quot; value=&quot;100&quot;&gt;</span><br><span class="line">  &lt;constructor-arg index=&quot;1&quot; value=&quot;mysql&quot;&gt;</span><br><span class="line">  &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™ç§æ–¹å¼å¯ä»¥è§£å†³å‚æ•°ç±»å‹é‡å¤é—®é¢˜</li>
<li>ä½†æ˜¯å¦‚æœæ„é€ æ–¹æ³•å‚æ•°é¡ºåºå‘ç”Ÿæ”¹å˜ä¹‹åï¼Œè¿™ç§æ–¹å¼åˆå¸¦æ¥äº†è€¦åˆé—®é¢˜</li>
</ul>
<p>è¯¥å¦‚ä½•é€‰æ‹©</p>
<ol>
<li>å¼ºåˆ¶ä¾èµ–ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼Œä½¿ç”¨ setter æ³¨å…¥æœ‰æ¦‚ç‡ä¸è¿›è¡Œæ³¨å…¥å¯¼è‡´ null å¯¹è±¡å‡ºç°</li>
</ol>
<p>å¼ºåˆ¶ä¾èµ–æŒ‡çš„æ˜¯å¯¹è±¡åœ¨åˆ›å»ºçš„æ—¶å€™å°±å¿…é¡»è¦æ³¨å…¥æŒ‡å®šçš„å¯¹è±¡</p>
<ol start="2">
<li>å¯é€‰ä¾èµ–ä½¿ç”¨ setter æ³¨å…¥è¿›è¡Œï¼Œçµæ´»æ€§æ¯”è¾ƒå¼º</li>
</ol>
<p>å¯é€‰ä¾èµ–æŒ‡çš„æ˜¯å¯¹è±¡åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­å¿…é¡»è¦æ³¨å…¥æŒ‡å®šçš„å‚æ•°</p>
<ol start="3">
<li>spring æ¡†æ¶å€¡å¯¼ä½¿ç”¨æ„é€ å™¨ï¼Œç¬¬ä¸‰æ–¹æ¡†æ¶å†…éƒ¨å¤§å¤šæ•°é‡‡ç”¨æ„é€ å™¨æ³¨å…¥çš„å½¢å¼è¿›è¡Œæ•°æ®åˆå§‹åŒ–ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒä¸¥è°¨</li>
<li>å¦‚æœæœ‰å¿…è¦å¯ä»¥ä¸¤è€…åŒæ—¶ä½¿ç”¨ï¼Œä½¿ç”¨æ„é€ å™¨æ³¨å…¥å®Œæˆå¼ºåˆ¶ä¾èµ–çš„æ³¨å…¥ï¼Œä½¿ç”¨ setter æ³¨å…¥å®Œæˆå¯é€‰ä¾èµ–çš„æ³¨å…¥</li>
<li>å®é™…å¼€å‘è¿‡ç¨‹ä¸­è¿˜è¦æ ¹æ®å®é™…æƒ…å†µåˆ†æï¼Œå¦‚æœå—æ§å¯¹è±¡æ²¡æœ‰æä¾› setter æ–¹æ³•å°±å¿…é¡»è¦ä½¿ç”¨æ„é€ å™¨æ–¹æ³•æ³¨å…¥</li>
<li>è‡ªå·±å¼€å‘çš„æ¨¡å—ä¸­æ¨èä½¿ç”¨çš„æ˜¯ setter æ³¨å…¥</li>
</ol>
<p>setter æ³¨å…¥</p>
<ul>
<li>ç®€å•æ•°æ®ç±»å‹</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">prperty</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¼•ç”¨æ•°æ®ç±»å‹</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ„é€ å™¨æ³¨å…¥</p>
<ul>
<li>ç®€å•æ•°æ®ç±»å‹</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">index</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¼•ç”¨æ•°æ®ç±»å‹</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">index</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¾èµ–æ³¨å…¥çš„æ–¹å¼é€‰æ‹©ä¸Š</p>
<ul>
<li>å»ºè®®ä½¿ç”¨ setter æ³¨å…¥</li>
<li>ç¬¬ä¸‰æ–¹æŠ€æœ¯æ ¹æ®æƒ…å†µé€‰æ‹©</li>
</ul>
<h2 id="6-è‡ªåŠ¨é…ç½®"><a class="markdownIt-Anchor" href="#6-è‡ªåŠ¨é…ç½®">#</a> 6 è‡ªåŠ¨é…ç½®</h2>
<p>ä»€ä¹ˆæ˜¯ä¾èµ–è‡ªåŠ¨è£…é…ï¼Ÿ</p>
<ul>
<li>IOC å®¹å™¨æ ¹æ® bean æ‰€ä¾èµ–èµ„æºåœ¨å®¹å™¨ä¸­è‡ªåŠ¨æŸ¥æ‰¾å¹¶æ³¨å…¥åˆ° bean ä¸­çš„è¿‡ç¨‹ç§°ä¸ºè‡ªåŠ¨è£…é…</li>
</ul>
<p>è‡ªåŠ¨ç±»å‹è£…é…æœ‰å“ªäº›</p>
<ul>
<li>æŒ‰ç…§ç±»å‹ï¼ˆå¸¸ç”¨ï¼‰</li>
<li>æŒ‰ç…§åç§°</li>
<li>æŒ‰ç…§æ„é€ æ–¹æ³•</li>
<li>ä¸å¯ç”¨è‡ªåŠ¨è£…é…</li>
</ul>
<h3 id="å®Œæˆè‡ªåŠ¨è£…é…çš„é…ç½®"><a class="markdownIt-Anchor" href="#å®Œæˆè‡ªåŠ¨è£…é…çš„é…ç½®">#</a> å®Œæˆè‡ªåŠ¨è£…é…çš„é…ç½®</h3>
<p>è‡ªåŠ¨è£…é…åªéœ€è¦ä¿®æ”¹ applicationContext.xml é…ç½®æ–‡ä»¶å³å¯ï¼›</p>
<p>1ï¼‰å°†<property>æ ‡ç­¾åˆ é™¤</p>
<p>2ï¼‰åœ¨<bean>æ ‡ç­¾ä¸­æ·»åŠ  autowire å±æ€§</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--autowireå±æ€§ï¼šå¼€å¯è‡ªåŠ¨è£…é…ï¼Œé€šå¸¸ä½¿ç”¨æŒ‰ç±»å‹è£…é…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>éœ€è¦æ³¨å…¥å±æ€§çš„ç±»ä¸­å¯¹åº”çš„å±æ€§çš„ setter æ–¹æ³•ä¸èƒ½çœç•¥</li>
<li>è¢«æ³¨å…¥çš„å¯¹è±¡å¿…é¡»è¦è¢« spring çš„ IOC å®¹å™¨ç®¡ç†</li>
<li>æŒ‰ç…§ç±»å‹åœ¨ spring çš„ IOC å®¹å™¨ä¸­å¦‚æœæ‰¾åˆ°å¤šä¸ªå¯¹è±¡ï¼Œä¼šæŠ¥ NoUniqueBeanDefinitionException</li>
</ul>
<p>ä¸€ä¸ªç±»å‹åœ¨ IOC ä¸­æœ‰å¤šä¸ªå¯¹è±¡ï¼Œè¿˜æƒ³è¦æ³¨å…¥æˆåŠŸï¼Œè¿™ä¸ªæ—¶å€™å°±å¿…é¡»è¦æŒ‰ç…§åç§°æ¥è¿›è¡Œæ³¨å…¥ï¼Œé…ç½®æ–¹å¼ä¸ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--autowireå±æ€§ï¼šå¼€å¯è‡ªåŠ¨è£…é…ï¼Œé€šå¸¸ä½¿ç”¨æŒ‰ç±»å‹è£…é…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.BookServiceImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æŒ‰ç…§åç§°æ³¨å…¥ä¸­çš„åç§°æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/lin-yueheng/IMG_01/main/img/202212031846014.png" alt="image-20221203184643869"></p>
<p>bookDao æ˜¯ private ä¿®é¥°çš„ï¼Œå¤–éƒ¨ç±»æ— æ³•è¿›è¡Œè®¿é—®</p>
<p>å¯¹äºå¤–éƒ¨ç±»æ¥è¯´åªèƒ½è¿›è¡Œ set æ–¹æ³•è®¿é—®</p>
<p>å¯¹äºå¤–éƒ¨æ¥è¯´ï¼ŒsetBookDao æ–¹æ³•åç§°ï¼Œset åé¦–å­—æ¯å°å†™ä¹‹åå°±æ˜¯å…¶å±æ€§åç§°</p>
<ul>
<li>å¦‚æœæŒ‰ç…§åç§°å»æ‰¾å¯¹åº”çš„ bean å¯¹è±¡ï¼Œæ‰¾ä¸åˆ°åˆ™æ³¨å…¥ null</li>
<li>å½“æŸä¸€ç§ç±»å‹åœ¨ IOC å®¹å™¨ä¸­æœ‰å¤šä¸ªå¯¹è±¡ï¼ŒæŒ‰ç…§åç§°æ³¨å…¥åªæ‰¾å…¶æŒ‡å®šåç§°å¯¹åº”çš„ bean å¯¹è±¡ï¼Œä¸ç„¶ä¼šæŠ¥é”™</li>
</ul>
<p>ç”¨çš„æ›´å¤šçš„æ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥</p>
<ol>
<li>è‡ªåŠ¨è£…é…ç”¨äºå¼•ç”¨ç±»å‹ä¾èµ–æ³¨å…¥ï¼Œä¸èƒ½å¯¹ç®€å•ç±»å‹è¿›è¡Œæ“ä½œ</li>
<li>ä½¿ç”¨æŒ‰ç±»å‹è£…é…æ—¶ (byType) å¿…é¡»è¦ä¿è¯å®¹å™¨ä¸­çš„ç›¸åŒç±»å‹çš„ bean å”¯ä¸€ï¼Œæ¨èä½¿ç”¨</li>
<li>ä½¿ç”¨æŒ‰ç…§åæ¬¡è£…é…æ—¶ (byName) å¿…é¡»è¦ä¿éšœå®¹å™¨ä¸­å…·æœ‰æŒ‡å®šåç§°çš„ beanï¼Œå› å˜é‡ä¸é…ç½®è€¦åˆï¼Œä¸æ¨èä½¿ç”¨</li>
<li>è‡ªåŠ¨è£…é…ä¼˜å…ˆçº§ä½äº setter æ³¨å…¥å’Œæ„é€ å™¨æ³¨å…¥ï¼ŒåŒæ—¶å‡ºç°æ—¶è‡ªåŠ¨è£…é…é…ç½®å¤±æ•ˆ</li>
</ol>
<h2 id="7-é›†åˆæ³¨å…¥"><a class="markdownIt-Anchor" href="#7-é›†åˆæ³¨å…¥">#</a> 7 é›†åˆæ³¨å…¥</h2>
<p>å¸¸è§çš„é›†åˆç±»å‹æœ‰ï¼š</p>
<ul>
<li>æ•°ç»„</li>
<li>List</li>
<li>Set</li>
<li>Map</li>
<li>Properties</li>
</ul>
<p>1ï¼‰public interface BookDao {<br>
public void save();<br>
}</p>
<p>public class BookDaoImpl implements BookDao {</p>
<p>public class BookDaoImpl implements BookDao {</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Set&lt;String&gt; set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Map&lt;String,String&gt; map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Properties properties;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;éå†æ•°ç»„:&quot;</span> + Arrays.toString(array));</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;éå†List&quot;</span> + list);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;éå†Set&quot;</span> + set);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;éå†Map&quot;</span> + map);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;éå†Properties&quot;</span> + properties);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//setter....æ–¹æ³•çœç•¥ï¼Œè‡ªå·±ä½¿ç”¨å·¥å…·ç”Ÿæˆ</span></span><br></pre></td></tr></table></figure>
<p>}</p>
<p>(2) resources ä¸‹æä¾› spring çš„é…ç½®æ–‡ä»¶ï¼ŒapplicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.BookDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>(3) ç¼–å†™ AppForDICollection è¿è¡Œç±»ï¼ŒåŠ è½½ Spring çš„ IOC å®¹å™¨ï¼Œå¹¶ä»ä¸­è·å–å¯¹åº”çš„ bean å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppForDICollection</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> (BookDao) ctx.getBean(<span class="string">&quot;bookDao&quot;</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨å…¥æ•°ç»„ç±»å‹æ•°æ®"><a class="markdownIt-Anchor" href="#æ³¨å…¥æ•°ç»„ç±»å‹æ•°æ®">#</a> æ³¨å…¥æ•°ç»„ç±»å‹æ•°æ®</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;array&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>  100  <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>  100  <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>  100  <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ³¨å…¥listç±»å‹æ•°æ®"><a class="markdownIt-Anchor" href="#æ³¨å…¥listç±»å‹æ•°æ®">#</a> æ³¨å…¥ List ç±»å‹æ•°æ®</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itheima<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>chuanzhihui<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id=""><a class="markdownIt-Anchor" href="#">#</a> </h4>
<h4 id="æ³¨å…¥setç±»å‹æ•°æ®"><a class="markdownIt-Anchor" href="#æ³¨å…¥setç±»å‹æ•°æ®">#</a> æ³¨å…¥ Set ç±»å‹æ•°æ®</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itcast<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>itheima<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>boxuegu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="-2"><a class="markdownIt-Anchor" href="#-2">#</a> </h4>
<h4 id="æ³¨å…¥mapç±»å‹æ•°æ®"><a class="markdownIt-Anchor" href="#æ³¨å…¥mapç±»å‹æ•°æ®">#</a> æ³¨å…¥ Map ç±»å‹æ•°æ®</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;country&quot;</span> <span class="attr">value</span>=<span class="string">&quot;china&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;province&quot;</span> <span class="attr">value</span>=<span class="string">&quot;henan&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;city&quot;</span> <span class="attr">value</span>=<span class="string">&quot;kaifeng&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="-3"><a class="markdownIt-Anchor" href="#-3">#</a> </h4>
<h2 id="8-æ³¨å…¥propertiesç±»å‹æ•°æ®"><a class="markdownIt-Anchor" href="#8-æ³¨å…¥propertiesç±»å‹æ•°æ®">#</a> 8 æ³¨å…¥ Properties ç±»å‹æ•°æ®</h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;country&quot;</span>&gt;</span>china<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;city&quot;</span>&gt;</span>beijing<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼›</p>
<ul>
<li>properties æ ‡ç­¾ä¸­è¡¨ç¤º setter æ–¹å¼æ³¨å…¥ï¼Œæ„é€ æ–¹å¼ conStructor-arg æ ‡ç­¾å†…éƒ¨ä¹Ÿå¯ä»¥å†™<array>ã€‚ã€‚ã€‚ã€‚</li>
<li>List çš„åº•å±‚ä¹Ÿæ˜¯ç”¨æ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥<List>å’Œ<array>æ ‡ç­¾æ˜¯å¯ä»¥æ··ç”¨çš„</li>
<li>é›†åˆä¸­è¦æ·»åŠ å¼•ç”¨ç±»å‹ã€åªéœ€è¦æŠŠ<value>æ ‡ç­¾æ”¹æˆ<ref>æ ‡ç­¾ï¼Œè¿™ç§æ–¹å¼ä½¿ç”¨çš„æ¯”è¾ƒå°‘</li>
</ul>
<h2 id="9-iocdié…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean"><a class="markdownIt-Anchor" href="#9-iocdié…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹bean">#</a> 9 IOC/DI é…ç½®ç®¡ç†ç¬¬ä¸‰æ–¹ bean</h2>
<p>æ•°æ®æºå¯¹è±¡ç®¡ç†</p>
<blockquote>
<p>éœ€æ±‚ï¼šä½¿ç”¨ Spring çš„ IOC å®¹å™¨æ¥ç®¡ç† Druid è¿æ¥æ± å¯¹è±¡</p>
<ol>
<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æŠ€æœ¯ï¼Œéœ€è¦åœ¨ pom.xml æ·»åŠ ä¾èµ–</li>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­å°†ã€ç¬¬ä¸‰æ–¹çš„ç±»ã€‘åˆ¶ä½œæˆä¸€ä¸ª beanï¼Œè®© IOC å®¹å™¨æ¥è¿›è¡Œç®¡ç†</li>
<li>æ•°æ®åº“è¿æ¥æ± éœ€è¦åŸºç¡€çš„å››è¦ç´  é©±åŠ¨ã€è¿æ¥ã€ç”¨æˆ·åã€å¯†ç ï¼Œã€å¦‚ä½•æ³¨å…¥ã€‘åˆ°å¯¹åº”çš„ bean ä¸­</li>
<li>ä» IOC å®¹å™¨ä¸­è·å–å¯¹åº”çš„ bean å¯¹è±¡ï¼Œå°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ä¸­æŸ¥çœ‹ç»“æœ</li>
</ol>
</blockquote>
<p>pom.xml ä¸­æ·»åŠ ä¾èµ–</p>
<p>é…ç½®ç¬¬ä¸‰æ–¹çš„ bean</p>
<p>åœ¨ applicationContext.xml é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  DruidDataSource çš„é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--ç®¡ç†DruidDataSourceå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®ç¬¬ä¸‰æ–¹bean"><a class="markdownIt-Anchor" href="#é…ç½®ç¬¬ä¸‰æ–¹bean">#</a> é…ç½®ç¬¬ä¸‰æ–¹ bean</h3>
<p>åœ¨ applicationContext.xml é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  <code>DruidDataSource</code>  çš„é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--ç®¡ç†DruidDataSourceå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>è¯´æ˜:</strong></p>
<ul>
<li>driverClassName: æ•°æ®åº“é©±åŠ¨</li>
<li>url: æ•°æ®åº“è¿æ¥åœ°å€</li>
<li>username: æ•°æ®åº“è¿æ¥ç”¨æˆ·å</li>
<li>password: æ•°æ®åº“è¿æ¥å¯†ç </li>
<li>æ•°æ®åº“è¿æ¥çš„å››è¦ç´ è¦å’Œè‡ªå·±ä½¿ç”¨çš„æ•°æ®åº“ä¿¡æ¯ä¸€è‡´ã€‚</li>
</ul>
<h3 id="ä»iocå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡"><a class="markdownIt-Anchor" href="#ä»iocå®¹å™¨ä¸­è·å–å¯¹åº”çš„beanå¯¹è±¡">#</a> ä» IOC å®¹å™¨ä¸­è·å–å¯¹åº”çš„ bean å¯¹è±¡</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">       <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> (DataSource) ctx.getBean(<span class="string">&quot;dataSource&quot;</span>);</span><br><span class="line">       System.out.println(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="-4"><a class="markdownIt-Anchor" href="#-4">#</a> </h5>
<h3 id="å®ç°c3p0ç®¡ç†"><a class="markdownIt-Anchor" href="#å®ç°c3p0ç®¡ç†">#</a> å®ç° c3p0 ç®¡ç†</h3>
<p>é…ç½®ç¬¬ä¸‰æ–¹ bean</p>
<p>åœ¨ applicationContext.xml é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/spring_db&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1000&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ComboPooleDataSource çš„å±æ€§æ˜¯é€šè¿‡ setter æ–¹å¼æ³¨å…¥</li>
<li>æƒ³æ³¨å…¥çš„å±æ€§å°±éœ€è¦åœ¨ ComboPooleDataSource ç±»æˆ–è€…æ˜¯ä¸Šå±‚ç±»ä¸­æä¾›å±æ€§å¯¹åº”çš„ setter æ–¹æ³•</li>
<li>C3P0 çš„å››ä¸ªå±æ€§å’Œ Druid çš„å››ä¸ªå±æ€§æ˜¯ä¸ä¸€æ ·çš„</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æ•°æ®è¿æ¥æ± åœ¨é…ç½®å±æ€§çš„æ—¶å€™ï¼Œé™¤äº†å¯ä»¥æ³¨å…¥æ•°æ®åº“è¿æ¥å››ä¸ªè¦ç´ ä¹‹å¤–è¿˜å¯ä»¥é…ç½®å¾ˆå¤šå…¶ä»–çš„å±æ€§ï¼Œå…·ä½“éƒ½æœ‰å“ªäº›å±æ€§éœ€è¦è‡ªå·±å»æŸ¥
<ul>
<li>Druid å’Œ C3P0 åœ¨æ²¡æœ‰å¯¼å…¥ mysql é©±åŠ¨åŒ…çš„å‰æä¹‹ä¸‹ï¼Œä¸€ä¸ªæŠ¥é”™ä¸€ä¸ªæ²¡æŠ¥é”™ï¼Œè¯´æ˜ Druid åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ²¡æœ‰åŠ è½½é©±åŠ¨ï¼Œè€Œ C3P0 åˆšå¥½ç›¸å</li>
<li>Druid ç¨‹åºè¿è¡Œè™½ç„¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯å½“è°ƒç”¨ DruidDataSource çš„ getConnection () æ–¹æ³•è·å–é“¾æ¥çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ‰¾ä¸åˆ°é©±åŠ¨ç±»çš„é”™è¯¯</li>
</ul>
</li>
</ul>
<h3 id="åŠ è½½propertiesé…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#åŠ è½½propertiesé…ç½®æ–‡ä»¶">#</a> åŠ è½½ properties é…ç½®æ–‡ä»¶</h3>
<p>åŒ…å«äº†ä¸€äº›é—®é¢˜</p>
<ul>
<li>
<p>è¿™ä¸¤ä¸ªæ•°æ®æºä¸­éƒ½ä½¿ç”¨åˆ°äº†ä¸€äº›å›ºå®šçš„å¸¸é‡å¦‚æ•°æ®åº“è¿æ¥å››ä¸ªè¦ç´ ï¼ŒæŠŠè¿™äº›å€¼å†™åœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­ä¸åˆ©äºåæœŸçš„ç»´æŠ¤</p>
</li>
<li>
<p>éœ€è¦å°†è¿™äº›å€¼æå–åˆ°ä¸€ä¸ªå¤–éƒ¨çš„ properties é…ç½®æ–‡ä»¶ä¸­</p>
</li>
<li>
<p>Spring æ¡†æ¶ä¸­å¦‚ä½•ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–å±æ€§å€¼æ¥é…ç½®å°±æ˜¯æ¥ä¸‹æ¥çš„é—®é¢˜</p>
</li>
</ul>
<p>ç¬¬ä¸‰æ–¹ bean å±æ€§ä¼˜åŒ–</p>
<h5 id="å®ç°æ€è·¯"><a class="markdownIt-Anchor" href="#å®ç°æ€è·¯">#</a> å®ç°æ€è·¯</h5>
<blockquote>
<p>éœ€æ±‚ï¼šå°†æ•°æ®åº“è¿æ¥å››è¦ç´ æå–åˆ° properties é…ç½®æ–‡ä»¶ï¼Œspring æ¥åŠ è½½é…ç½®ä¿¡æ¯å¹¶ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥å®Œæˆå±æ€§æ³¨å…¥ã€‚</p>
<p>1. åœ¨ resources ä¸‹åˆ›å»ºä¸€ä¸ª jdbc.properties (æ–‡ä»¶çš„åç§°å¯ä»¥ä»»æ„)</p>
<p>2. å°†æ•°æ®åº“è¿æ¥å››è¦ç´ é…ç½®åˆ°é…ç½®æ–‡ä»¶ä¸­</p>
<p>3. åœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­åŠ è½½ properties æ–‡ä»¶</p>
<p>4. ä½¿ç”¨åŠ è½½åˆ°çš„å€¼å®ç°å±æ€§æ³¨å…¥</p>
<p>å…¶ä¸­ç¬¬ 3ï¼Œ4 æ­¥éª¤æ˜¯é‡ç‚¹å…³æ³¨çš„ï¼Œå…·ä½“æ˜¯å¦‚ä½•å®ç°ã€‚</p>
</blockquote>
<h5 id="å®ç°æ­¥éª¤"><a class="markdownIt-Anchor" href="#å®ç°æ­¥éª¤">#</a> å®ç°æ­¥éª¤</h5>
<p>å‡†å¤‡å¥½ properties é…ç½®æ–‡ä»¶</p>
<p>resource ä¸‹åˆ›å»ºä¸€ä¸ª jdbc.properties æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¯¹åº”çš„å±æ€§é”®å€¼å¯¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://127.0.0.1:3306/Database_name</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=root</span><br></pre></td></tr></table></figure>
<p>åœ¨ applicationContext.xml ä¸­å¼€ context å‘½åç©ºé—´</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span>         </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ ${key} æ¥è¯»å– properties é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å¹¶å®Œæˆå±æ€§æ³¨å…¥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è¯»å–å•ä¸ªå±æ€§"><a class="markdownIt-Anchor" href="#è¯»å–å•ä¸ªå±æ€§">#</a> <strong>è¯»å–å•ä¸ªå±æ€§</strong></h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.ityueheng.dao.impl.BookDaoImpl&quot;</span>&gt;</span>    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.ityueheng.User.impl.UserDaoImpl&quot;</span>&gt;</span>    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.ityueheng.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookDao&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    ç›´æ¥å¯¹å®ä½“ç±»Studentä¸­çš„å±æ€§èµ‹å€¼--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.ityueheng.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;28&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;202110098141&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ—å¸¸æ’&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    ***</span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookDao1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.ityueheng.dao.impl.BookDaoImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>é—®é¢˜ä¸€ï¼šé”®å€¼å¯¹çš„ key ä¸º username å¼•å‘çš„é—®é¢˜</li>
</ul>
<ol>
<li>åœ¨ properties ä¸­é…ç½®é”®å€¼å¯¹çš„æ—¶å€™ï¼Œå¦‚æœ key è®¾ç½®ä¸º username</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=root666</span><br></pre></td></tr></table></figure>
<p>å‡ºç°é—®é¢˜çš„åŸå› æ˜¯ <code>&lt;context:property-placeholder/&gt;</code>  æ ‡ç­¾ä¼šåŠ è½½ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œè€Œä¸”ç¯å¢ƒå˜é‡çš„å€¼ä¼šè¢«ä¼˜å…ˆåŠ è½½ï¼Œå¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    Map&lt;String, String&gt; env = System.getenv();</span><br><span class="line">    System.out.println(env);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:property-placeholder location=&quot;jdbc.properties&quot; system-properties-mode=&quot;NEVER&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>system-properties-modeï¼šè®¾ç½®ä¸º NEVERï¼Œè¡¨ç¤ºä¸åŠ è½½ç³»ç»Ÿçš„å±æ€§ï¼Œå°±å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜</p>
<p>æœ€å¥½çš„è§£å†³æ–¹æ³•å°±æ˜¯é¿å…ä½¿ç”¨ username ä½œä¸ºå±æ€§çš„ key</p>
<p>å½“æœ‰å¤šä¸ª properties é…ç½®æ–‡ä»¶éœ€è¦è¢«åŠ è½½ï¼Œè¯¥å¦‚ä½•é…ç½®ï¼Ÿ</p>
<p>1. è°ƒæ•´ä¸‹é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨ resources ä¸‹æ·»åŠ  <code>jdbc.properties</code> , <code>jdbc2.properties</code> , å†…å®¹å¦‚ä¸‹:</p>
<p>jdbc.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/spring_db</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
<p>jdbc2.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">root666</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ–¹å¼ä¸€ï¼š</span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties,jdbc2.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>&gt;</span></span><br><span class="line">    æ–¹å¼äºŒï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;*.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>&gt;</span></span><br><span class="line">        æ–¹å¼ä¸‰ï¼š</span><br><span class="line">            <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:*.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>&gt;</span></span><br><span class="line">                æ–¹å¼å››ï¼š</span><br><span class="line">                      <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath*:*.properties&quot;</span> <span class="attr">system-properties-mode</span>=<span class="string">&quot;NEVER&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹å¼ä¸€ï¼šå¯ä»¥å®ç°ï¼Œå¦‚æœé…ç½®æ–‡ä»¶å¤šçš„è¯ï¼Œæ¯ä¸ªéƒ½éœ€è¦é…ç½®</li>
<li>æ–¹å¼äºŒï¼š*.properties ä»£è¡¨çš„æ˜¯æ‰€æœ‰</li>
<li>æ–¹å¼ä¸‰ï¼šæ ‡å‡†å†™æ³•ï¼Œclasspathï¼šä»£è¡¨çš„æ˜¯ä»æ ¹è·¯å¾„å¼€å§‹æŸ¥æ‰¾ï¼Œä½†æ˜¯åªèƒ½æŸ¥è¯¢åˆ°å½“å‰é¡¹ç›®çš„è·¯å¾„</li>
<li>æ–¹å¼å››ï¼šä¸ä»…å¯ä»¥åŠ è½½å½“å‰é¡¹ç›®è¿˜å¯ä»¥åŠ è½½å½“å‰é¡¹ç›®æ‰€ä¾èµ–çš„æ‰€æœ‰é¡¹ç›®çš„æ ¹è·¯å¾„ä¸‹çš„ properties é…ç½®æ–‡ä»¶</li>
</ul>
<p><img data-src="java-SSM.assets/image-20221209091913181.png" alt="image-20221209091913181"></p>
<p><img data-src="java-SSM.assets/image-20221209093248647.png" alt="image-20221209093248647"></p>
<h1 id="aopç®€ä»‹"><a class="markdownIt-Anchor" href="#aopç®€ä»‹">#</a> AOP ç®€ä»‹ï¼š</h1>
<p>Aop å°±æ˜¯åœ¨ä¸æ”¹å˜åŸæœ‰çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹å…¶è¿›è¡Œå¢å¼º</p>
<h2 id="ä»€ä¹ˆæ˜¯aop"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯aop">#</a> ä»€ä¹ˆæ˜¯ AOP?</h2>
<ul>
<li>AOP (Aspect Oriented Programming) é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼ŒæŒ‡å¯¼å¼€å‘è€…å¦‚ä½•ç»„ç»‡ç¨‹åºç»“æ„ã€‚
<ul>
<li>OOP (Object Oriented Programming) é¢å‘å¯¹è±¡ç¼–ç¨‹</li>
</ul>
</li>
</ul>
<p>OOP æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œé‚£ä¹ˆ AOP ä¹Ÿæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç¼–ç¨‹æ€æƒ³ä¸»è¦çš„å†…å®¹å°±æ˜¯æŒ‡å¯¼ç¨‹åºå‘˜è¯¥å¦‚ä½•ç¼–å†™ç¨‹åºï¼Œæ‰€ä»¥å®ƒä»¬ä¸¤ä¸ªæ˜¯ä¸åŒçš„ <code>ç¼–ç¨‹èŒƒå¼</code> ã€‚</p>
<h3 id="aopä½œç”¨"><a class="markdownIt-Anchor" href="#aopä½œç”¨">#</a> AOP ä½œç”¨</h3>
<ul>
<li>ä½œç”¨ï¼šåœ¨ä¸æƒŠåŠ¨åŸå§‹è®¾è®¡çš„åŸºç¡€ä¸Šä¸ºå…¶è¿›è¡ŒåŠŸèƒ½å¢å¼ºï¼Œå‰é¢å’±ä»¬æœ‰æŠ€æœ¯å°±å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½å³ä»£ç†æ¨¡å¼ã€‚</li>
</ul>
<p>å‰é¢å’±ä»¬æœ‰æŠ€æœ¯å°±å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½å³ <code>ä»£ç†æ¨¡å¼</code> ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è®°å½•ç¨‹åºå½“å‰æ‰§è¡Œæ‰§è¡Œï¼ˆå¼€å§‹æ—¶é—´ï¼‰</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//ä¸šåŠ¡æ‰§è¡Œä¸‡æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;<span class="number">10000</span>;i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;book dao save ...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è®°å½•ç¨‹åºå½“å‰æ‰§è¡Œæ—¶é—´ï¼ˆç»“æŸæ—¶é—´ï¼‰</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//è®¡ç®—æ—¶é—´å·®</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">totalTime</span> <span class="operator">=</span> endTime-startTime;</span><br><span class="line">        <span class="comment">//è¾“å‡ºä¿¡æ¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œä¸‡æ¬¡æ¶ˆè€—æ—¶é—´ï¼š&quot;</span> + totalTime + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao update ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao delete ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;book dao select ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="java-SSM.assets/image-20221210162709917.png" alt="image-20221210162709917"></p>
<p>è¿™æ®µä»£ç çš„å…¶ä»–æ–¹æ³• (update ()ï¼Œdelete ()ï¼Œselect ()) ä¹Ÿèƒ½å¤Ÿå¢åŠ è·Ÿ save () æ–¹æ³•ä¸€æ ·çš„åŠŸèƒ½ã€‚</p>
<p>åœ¨ä¸æƒŠåŠ¨ (æ”¹åŠ¨) åŸæœ‰è®¾è®¡ (ä»£ç ) çš„å‰æä¸‹ï¼Œæƒ³ç»™è°æ·»åŠ åŠŸèƒ½å°±ç»™è°æ·»åŠ ã€‚è¿™ä¸ªä¹Ÿå°±æ˜¯ Spring çš„ç†å¿µï¼š</p>
<ul>
<li>æ— å…¥ä¾µå¼ / æ— ä¾µå…¥å¼</li>
</ul>
<p><img data-src="java-SSM.assets/image-20221210162641272.png" alt="image-20221210162641272"></p>
<ul>
<li>è¿æ¥ç‚¹ (JoinPoint)ï¼šç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä»»æ„ä½ç½®ï¼Œç²’åº¦ä¸ºæ‰§è¡Œæ–¹æ³•ã€æŠ›å‡ºå¼‚å¸¸ã€è®¾ç½®å˜é‡ç­‰
<ul>
<li>åœ¨ SpringAOP ä¸­ï¼Œç†è§£ä¸ºæ–¹æ³•çš„æ‰§è¡Œ</li>
</ul>
</li>
<li>åˆ‡å…¥ç‚¹ (Pointcut): åŒ¹é…è¿æ¥ç‚¹çš„å¼å­
<ul>
<li>åœ¨ SpringAOP ä¸­ï¼Œä¸€ä¸ªåˆ‡å…¥ç‚¹å¯ä»¥æè¿°ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œä¹Ÿå¯ä¹ŸåŒ¹é…å¤šä¸ªæ–¹æ³•
<ul>
<li>ä¸€ä¸ªå…·ä½“çš„æ–¹æ³•ï¼šå¦‚ com.itheima.dao åŒ…ä¸‹çš„ BookDao æ¥å£ä¸­çš„æ— å½¢å‚æ— è¿”å›å€¼çš„ save æ–¹æ³•</li>
<li>åŒ¹é…å¤šä¸ªæ–¹æ³•ï¼šæ‰€æœ‰çš„ save æ–¹æ³•ï¼Œæ‰€æœ‰çš„ get å¼€å¤´çš„æ–¹æ³•ï¼Œæ‰€æœ‰ä»¥ Dao ç»“å°¾çš„æ¥å£ä¸­çš„ä»»æ„æ–¹æ³•ï¼Œæ‰€æœ‰å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•</li>
</ul>
</li>
<li>è¿æ¥ç‚¹èŒƒå›´è¦æ¯”åˆ‡å…¥ç‚¹èŒƒå›´å¤§ï¼Œæ˜¯åˆ‡å…¥ç‚¹çš„æ–¹æ³•ä¹Ÿä¸€å®šæ˜¯è¿æ¥ç‚¹ï¼Œä½†æ˜¯æ˜¯è¿æ¥ç‚¹çš„æ–¹æ³•å°±ä¸ä¸€å®šè¦è¢«å¢å¼ºï¼Œæ‰€ä»¥å¯èƒ½ä¸æ˜¯åˆ‡å…¥ç‚¹ã€‚</li>
</ul>
</li>
<li>é€šçŸ¥ (Advice): åœ¨åˆ‡å…¥ç‚¹å¤„æ‰§è¡Œçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å…±æ€§åŠŸèƒ½
<ul>
<li>åœ¨ SpringAOP ä¸­ï¼ŒåŠŸèƒ½æœ€ç»ˆä»¥æ–¹æ³•çš„å½¢å¼å‘ˆç°</li>
</ul>
</li>
<li>é€šçŸ¥ç±»ï¼šå®šä¹‰é€šçŸ¥çš„ç±»</li>
<li>åˆ‡é¢ (Aspect): æè¿°é€šçŸ¥ä¸åˆ‡å…¥ç‚¹çš„å¯¹åº”å…³ç³»ã€‚</li>
</ul>
<h3 id="aopå…¥é—¨æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#aopå…¥é—¨æ¡ˆä¾‹">#</a> AOP å…¥é—¨æ¡ˆä¾‹</h3>
<p>è®¾å®šï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰è¾“å‡ºå½“å‰ç³»ç»Ÿæ—¶é—´ã€‚</p>
<p>é‡‡ç”¨æ³¨è§£å®Œæˆ AOP çš„å¼€å‘ã€‚</p>
<blockquote>
<p>1. å¯¼å…¥åæ ‡ (pom.xml)</p>
<p>2. åˆ¶ä½œè¿æ¥ç‚¹ (åŸå§‹æ“ä½œï¼ŒDao æ¥å£ä¸å®ç°ç±»)</p>
<p>3. åˆ¶ä½œå…±æ€§åŠŸèƒ½ (é€šçŸ¥ç±»ä¸é€šçŸ¥)</p>
<p>4. å®šä¹‰åˆ‡å…¥ç‚¹</p>
<p>5. ç»‘å®šåˆ‡å…¥ç‚¹ä¸é€šçŸ¥å…³ç³» (åˆ‡é¢)</p>
</blockquote>
<h3 id="24-aopå®ç°æ­¥éª¤"><a class="markdownIt-Anchor" href="#24-aopå®ç°æ­¥éª¤">#</a> 2.4 AOP å®ç°æ­¥éª¤</h3>
<h4 id="æ­¥éª¤1æ·»åŠ ä¾èµ–"><a class="markdownIt-Anchor" href="#æ­¥éª¤1æ·»åŠ ä¾èµ–">#</a> æ­¥éª¤ 1: æ·»åŠ ä¾èµ–</h4>
<p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img data-src="java-SSM.assets/1630146885493.png" alt="1630146885493"></p>
<ul>
<li>å› ä¸º <code>spring-context</code>  ä¸­å·²ç»å¯¼å…¥äº† <code>spring-aop</code> , æ‰€ä»¥ä¸éœ€è¦å†å•ç‹¬å¯¼å…¥ <code>spring-aop</code></li>
<li>å¯¼å…¥ AspectJ çš„ jar åŒ…ï¼ŒAspectJ æ˜¯ AOP æ€æƒ³çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼ŒSpring æœ‰è‡ªå·±çš„ AOP å®ç°ï¼Œä½†æ˜¯ç›¸æ¯”äº AspectJ æ¥è¯´æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥é‡‡ç”¨ Spring æ•´åˆ ApsectJ çš„æ–¹å¼è¿›è¡Œ AOP å¼€å‘ã€‚</li>
</ul>
<h4 id="æ­¥éª¤2å®šä¹‰æ¥å£ä¸å®ç°ç±»"><a class="markdownIt-Anchor" href="#æ­¥éª¤2å®šä¹‰æ¥å£ä¸å®ç°ç±»">#</a> æ­¥éª¤ 2: å®šä¹‰æ¥å£ä¸å®ç°ç±»</h4>
<h4 id="æ­¥éª¤3å®šä¹‰é€šçŸ¥ç±»å’Œé€šçŸ¥"><a class="markdownIt-Anchor" href="#æ­¥éª¤3å®šä¹‰é€šçŸ¥ç±»å’Œé€šçŸ¥">#</a> æ­¥éª¤ 3: å®šä¹‰é€šçŸ¥ç±»å’Œé€šçŸ¥</h4>
<p>é€šçŸ¥å°±æ˜¯å°†å…±æ€§åŠŸèƒ½æŠ½å–å‡ºæ¥åå½¢æˆçš„æ–¹æ³•ï¼Œå…±æ€§åŠŸèƒ½æŒ‡çš„å°±æ˜¯å½“å‰ç³»ç»Ÿæ—¶é—´çš„æ‰“å°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ­¥éª¤4å®šä¹‰åˆ‡å…¥ç‚¹"><a class="markdownIt-Anchor" href="#æ­¥éª¤4å®šä¹‰åˆ‡å…¥ç‚¹">#</a> æ­¥éª¤ 4: å®šä¹‰åˆ‡å…¥ç‚¹</h4>
<p>BookDaoImpl ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ save å’Œ updateï¼Œæˆ‘ä»¬è¦å¢å¼ºçš„æ˜¯ update æ–¹æ³•ï¼Œè¯¥å¦‚ä½•å®šä¹‰å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span>   <span class="comment">//å®šä¹‰é€šå¼å­</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»‘å®šåˆ‡å…¥ç‚¹ä¸é€šçŸ¥å…³ç³»ï¼Œå¹¶æŒ‡å®šé€šçŸ¥æ·»åŠ åˆ°åŸå§‹è¿æ¥ç‚¹çš„å…·ä½“æ‰§è¡Œ<mark>ä½ç½®</mark></p>
<p><img data-src="java-SSM.assets/1630148447689.png" alt="1630148447689"></p>
<p><strong>è¯´æ˜:</strong>@Before ç¿»è¯‘è¿‡æ¥æ˜¯ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯è¯´é€šçŸ¥ä¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ</p>
<h4 id="æ­¥éª¤6å°†é€šçŸ¥ç±»é…ç»™å®¹å™¨å¹¶æ ‡è¯†å…¶ä¸ºåˆ‡é¢ç±»"><a class="markdownIt-Anchor" href="#æ­¥éª¤6å°†é€šçŸ¥ç±»é…ç»™å®¹å™¨å¹¶æ ‡è¯†å…¶ä¸ºåˆ‡é¢ç±»">#</a> æ­¥éª¤ 6: å°†é€šçŸ¥ç±»é…ç»™å®¹å™¨å¹¶æ ‡è¯†å…¶ä¸ºåˆ‡é¢ç±»</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ­¥éª¤7å¼€å¯æ³¨è§£æ ¼å¼aopåŠŸèƒ½"><a class="markdownIt-Anchor" href="#æ­¥éª¤7å¼€å¯æ³¨è§£æ ¼å¼aopåŠŸèƒ½">#</a> æ­¥éª¤ 7: å¼€å¯æ³¨è§£æ ¼å¼ AOP åŠŸèƒ½</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima&quot;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="çŸ¥è¯†ç‚¹1enableaspectjautoproxy"><a class="markdownIt-Anchor" href="#çŸ¥è¯†ç‚¹1enableaspectjautoproxy">#</a> çŸ¥è¯†ç‚¹ 1ï¼š@EnableAspectJAutoProxy</h3>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>@EnableAspectJAutoProxy</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å‹</td>
<td>é…ç½®ç±»æ³¨è§£</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>é…ç½®ç±»å®šä¹‰ä¸Šæ–¹</td>
</tr>
<tr>
<td>ä½œç”¨</td>
<td>å¼€å¯æ³¨è§£æ ¼å¼ AOP åŠŸèƒ½</td>
</tr>
</tbody>
</table>
<h3 id="çŸ¥è¯†ç‚¹2aspect"><a class="markdownIt-Anchor" href="#çŸ¥è¯†ç‚¹2aspect">#</a> çŸ¥è¯†ç‚¹ 2ï¼š@Aspect</h3>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>@Aspect</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å‹</td>
<td>ç±»æ³¨è§£</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>åˆ‡é¢ç±»å®šä¹‰ä¸Šæ–¹</td>
</tr>
<tr>
<td>ä½œç”¨</td>
<td>è®¾ç½®å½“å‰ç±»ä¸º AOP åˆ‡é¢ç±»</td>
</tr>
</tbody>
</table>
<h3 id="çŸ¥è¯†ç‚¹3pointcut"><a class="markdownIt-Anchor" href="#çŸ¥è¯†ç‚¹3pointcut">#</a> çŸ¥è¯†ç‚¹ 3ï¼š@Pointcut</h3>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>@Pointcut</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å‹</td>
<td>æ–¹æ³•æ³¨è§£</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>åˆ‡å…¥ç‚¹æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td>
</tr>
<tr>
<td>ä½œç”¨</td>
<td>è®¾ç½®åˆ‡å…¥ç‚¹æ–¹æ³•</td>
</tr>
<tr>
<td>å±æ€§</td>
<td>valueï¼ˆé»˜è®¤ï¼‰ï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼</td>
</tr>
</tbody>
</table>
<h3 id="çŸ¥è¯†ç‚¹4before"><a class="markdownIt-Anchor" href="#çŸ¥è¯†ç‚¹4before">#</a> çŸ¥è¯†ç‚¹ 4ï¼š@Before</h3>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>@Before</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å‹</td>
<td>æ–¹æ³•æ³¨è§£</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>é€šçŸ¥æ–¹æ³•å®šä¹‰ä¸Šæ–¹</td>
</tr>
<tr>
<td>ä½œç”¨</td>
<td>è®¾ç½®å½“å‰é€šçŸ¥æ–¹æ³•ä¸åˆ‡å…¥ç‚¹ä¹‹é—´çš„ç»‘å®šå…³ç³»ï¼Œå½“å‰é€šçŸ¥æ–¹æ³•åœ¨åŸå§‹åˆ‡å…¥ç‚¹æ–¹æ³•å‰è¿è¡Œ</td>
</tr>
</tbody>
</table>
<h3 id="aopå·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#aopå·¥ä½œæµç¨‹">#</a> AOP å·¥ä½œæµç¨‹</h3>
<p>ç”±äº AOP æ˜¯åŸºäº Spring å®¹å™¨ç®¡ç†çš„ bean åšçš„å¢å¼ºï¼Œæ‰€ä»¥æ•´ä¸ªå·¥ä½œè¿‡ç¨‹éœ€è¦ä» Spring åŠ è½½ bean è¯´èµ·:</p>
<h4 id="æµç¨‹1springå®¹å™¨å¯åŠ¨"><a class="markdownIt-Anchor" href="#æµç¨‹1springå®¹å™¨å¯åŠ¨">#</a> æµç¨‹ 1:Spring å®¹å™¨å¯åŠ¨</h4>
<ul>
<li>å®¹å™¨å¯åŠ¨å°±éœ€è¦å»åŠ è½½ bean, å“ªäº›ç±»éœ€è¦è¢«åŠ è½½å‘¢ï¼Ÿ</li>
<li>éœ€è¦è¢«å¢å¼ºçš„ç±»ï¼Œå¦‚ï¼šBookServiceImpl</li>
<li>é€šçŸ¥ç±»ï¼Œå¦‚ï¼šMyAdvice</li>
<li>æ³¨æ„æ­¤æ—¶ bean å¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»ºæˆåŠŸ</li>
</ul>
<h4 id="æµç¨‹2è¯»å–æ‰€æœ‰åˆ‡é¢é…ç½®ä¸­çš„åˆ‡å…¥ç‚¹"><a class="markdownIt-Anchor" href="#æµç¨‹2è¯»å–æ‰€æœ‰åˆ‡é¢é…ç½®ä¸­çš„åˆ‡å…¥ç‚¹">#</a> æµç¨‹ 2: è¯»å–æ‰€æœ‰åˆ‡é¢é…ç½®ä¸­çš„åˆ‡å…¥ç‚¹</h4>
<p><img data-src="java-SSM.assets/1630151682428.png" alt="1630151682428"></p>
<ul>
<li>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­æœ‰ä¸¤ä¸ªåˆ‡å…¥ç‚¹çš„é…ç½®ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ª <code>ptx()</code>  å¹¶æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«è¯»å–ã€‚</li>
</ul>
<h4 id="æµç¨‹3åˆå§‹åŒ–bean"><a class="markdownIt-Anchor" href="#æµç¨‹3åˆå§‹åŒ–bean">#</a> æµç¨‹ 3: åˆå§‹åŒ– beanï¼Œ</h4>
<p>åˆ¤å®š bean å¯¹åº”çš„ç±»ä¸­çš„æ–¹æ³•æ˜¯å¦åŒ¹é…åˆ°ä»»æ„åˆ‡å…¥ç‚¹</p>
<ul>
<li>
<p>æ³¨æ„ç¬¬ 1 æ­¥åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œbean å¯¹è±¡è¿˜æ²¡æœ‰è¢«åˆ›å»ºæˆåŠŸã€‚</p>
</li>
<li>
<p>è¦è¢«å®ä¾‹åŒ– bean å¯¹è±¡çš„ç±»ä¸­çš„æ–¹æ³•å’Œåˆ‡å…¥ç‚¹è¿›è¡ŒåŒ¹é…</p>
<p><img data-src="java-SSM.assets/1630152538083.png" alt="1630152538083"></p>
<ul>
<li>åŒ¹é…å¤±è´¥ï¼Œåˆ›å»ºåŸå§‹å¯¹è±¡ï¼Œå¦‚ <code>UserDao</code>
<ul>
<li>åŒ¹é…å¤±è´¥è¯´æ˜ä¸éœ€è¦å¢å¼ºï¼Œç›´æ¥è°ƒç”¨åŸå§‹å¯¹è±¡çš„æ–¹æ³•å³å¯ã€‚</li>
</ul>
</li>
<li>åŒ¹é…æˆåŠŸï¼Œåˆ›å»ºåŸå§‹å¯¹è±¡ï¼ˆ<mark>ç›®æ ‡å¯¹è±¡</mark>ï¼‰çš„<mark>ä»£ç†</mark>å¯¹è±¡ï¼Œå¦‚: <code>BookDao</code>
<ul>
<li>åŒ¹é…æˆåŠŸè¯´æ˜éœ€è¦å¯¹å…¶è¿›è¡Œå¢å¼º</li>
<li>å¯¹å“ªä¸ªç±»åšå¢å¼ºï¼Œè¿™ä¸ªç±»å¯¹åº”çš„å¯¹è±¡å°±å«åšç›®æ ‡å¯¹è±¡</li>
<li>å› ä¸ºè¦å¯¹ç›®æ ‡å¯¹è±¡è¿›è¡ŒåŠŸèƒ½å¢å¼ºï¼Œè€Œé‡‡ç”¨çš„æŠ€æœ¯æ˜¯åŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡</li>
<li>æœ€ç»ˆè¿è¡Œçš„æ˜¯ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ä¼šå¯¹åŸå§‹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="æµç¨‹4è·å–beanæ‰§è¡Œæ–¹æ³•"><a class="markdownIt-Anchor" href="#æµç¨‹4è·å–beanæ‰§è¡Œæ–¹æ³•">#</a> æµç¨‹ 4: è·å– bean æ‰§è¡Œæ–¹æ³•</h4>
<ul>
<li>è·å–çš„ bean æ˜¯åŸå§‹å¯¹è±¡æ—¶ï¼Œè°ƒç”¨æ–¹æ³•å¹¶æ‰§è¡Œï¼Œå®Œæˆæ“ä½œ</li>
<li>è·å–çš„ bean æ˜¯ä»£ç†å¯¹è±¡æ—¶ï¼Œæ ¹æ®ä»£ç†å¯¹è±¡çš„è¿è¡Œæ¨¡å¼è¿è¡ŒåŸå§‹æ–¹æ³•ä¸å¢å¼ºçš„å†…å®¹ï¼Œå®Œæˆæ“ä½œ</li>
</ul>
<h4 id="éªŒè¯å®¹å™¨ä¸­æ˜¯å¦ä¸ºä»£ç†å¯¹è±¡"><a class="markdownIt-Anchor" href="#éªŒè¯å®¹å™¨ä¸­æ˜¯å¦ä¸ºä»£ç†å¯¹è±¡">#</a> éªŒè¯å®¹å™¨ä¸­æ˜¯å¦ä¸ºä»£ç†å¯¹è±¡</h4>
<p>ä¸ºäº†éªŒè¯ IOC å®¹å™¨ä¸­åˆ›å»ºçš„å¯¹è±¡å’Œæˆ‘ä»¬åˆšæ‰æ‰€è¯´çš„ç»“è®ºæ˜¯å¦ä¸€è‡´ï¼Œé¦–å…ˆå…ˆæŠŠç»“è®ºç†å‡ºæ¥:</p>
<ul>
<li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„æ–¹æ³•ä¼šè¢«å¢å¼ºï¼Œé‚£ä¹ˆå®¹å™¨ä¸­å°†å­˜å…¥çš„æ˜¯ç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡</li>
<li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„æ–¹æ³•ä¸è¢«å¢å¼ºï¼Œé‚£ä¹ˆå®¹å™¨ä¸­å°†å­˜å…¥çš„æ˜¯ç›®æ ‡å¯¹è±¡æœ¬èº«ã€‚</li>
</ul>
<h5 id="æ­¥éª¤1ä¿®æ”¹appç±»è·å–ç±»çš„ç±»å‹"><a class="markdownIt-Anchor" href="#æ­¥éª¤1ä¿®æ”¹appç±»è·å–ç±»çš„ç±»å‹">#</a> æ­¥éª¤ 1: ä¿®æ”¹ App ç±»ï¼Œè·å–ç±»çš„ç±»å‹</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="type">BookDao</span> <span class="variable">bookDao</span> <span class="operator">=</span> ctx.getBean(BookDao.class);</span><br><span class="line">        System.out.println(bookDao);</span><br><span class="line">        System.out.println(bookDao.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤2ä¿®æ”¹myadviceç±»ä¸å¢å¼º"><a class="markdownIt-Anchor" href="#æ­¥éª¤2ä¿®æ”¹myadviceç±»ä¸å¢å¼º">#</a> æ­¥éª¤ 2: ä¿®æ”¹ MyAdvice ç±»ï¼Œä¸å¢å¼º</h5>
<p>å› ä¸ºå®šä¹‰çš„åˆ‡å…¥ç‚¹ä¸­ï¼Œè¢«ä¿®æ”¹æˆ <code>update1</code> , æ‰€ä»¥ BookDao ä¸­çš„ update æ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±ä¸ä¼šè¢«å¢å¼ºï¼Œ</p>
<p>æ‰€ä»¥å®¹å™¨ä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯ç›®æ ‡å¯¹è±¡æœ¬èº«ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update1())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤3è¿è¡Œç¨‹åº-3"><a class="markdownIt-Anchor" href="#æ­¥éª¤3è¿è¡Œç¨‹åº-3">#</a> æ­¥éª¤ 3: è¿è¡Œç¨‹åº</h5>
<p><img data-src="java-SSM.assets/1630154495165.png" alt="1630154495165"></p>
<h5 id="æ­¥éª¤4ä¿®æ”¹myadviceç±»å¢å¼º"><a class="markdownIt-Anchor" href="#æ­¥éª¤4ä¿®æ”¹myadviceç±»å¢å¼º">#</a> æ­¥éª¤ 4: ä¿®æ”¹ MyAdvice ç±»ï¼Œå¢å¼º</h5>
<p>å› ä¸ºå®šä¹‰çš„åˆ‡å…¥ç‚¹ä¸­ï¼Œè¢«ä¿®æ”¹æˆ <code>update</code> , æ‰€ä»¥ BookDao ä¸­çš„ update æ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šè¢«å¢å¼ºï¼Œ</p>
<p>æ‰€ä»¥å®¹å™¨ä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯ç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤5è¿è¡Œç¨‹åº"><a class="markdownIt-Anchor" href="#æ­¥éª¤5è¿è¡Œç¨‹åº">#</a> æ­¥éª¤ 5: è¿è¡Œç¨‹åº</h5>
<p><img data-src="java-SSM.assets/1630154625564.png" alt="1630154625564"></p>
<p>æè¿°æ–¹å¼ä¸€ï¼šæ‰§è¡Œ com.itheima.dao åŒ…ä¸‹çš„ BookDao æ¥å£ä¸­çš„æ— å‚æ•° update æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="keyword">void</span> com.itheima.dao.BookDao.update())</span><br></pre></td></tr></table></figure>
<p>æè¿°æ–¹å¼äºŒï¼šæ‰§è¡Œ com.itheima.dao.impl åŒ…ä¸‹çš„ BookDaoImpl ç±»ä¸­çš„æ— å‚æ•° update æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(void com.itheima.dao.impl.BookDaoImpl.update())</span><br></pre></td></tr></table></figure>
<p>å¯¹äºåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•ä¸º:</p>
<ul>
<li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ ‡å‡†æ ¼å¼ï¼šåŠ¨ä½œå…³é”®å­— (è®¿é—®ä¿®é¥°ç¬¦  è¿”å›å€¼  åŒ…åã€‚ç±» / æ¥å£åã€‚æ–¹æ³•å (å‚æ•°) å¼‚å¸¸åï¼‰</li>
</ul>
<p>å¯¹äºè¿™ä¸ªæ ¼å¼ï¼Œä¸éœ€è¦ç¡¬è®°ï¼Œé€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œç†è§£å®ƒ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(public User com.itheima.service.UserService.findById(int))</span><br></pre></td></tr></table></figure>
<ul>
<li>executionï¼šåŠ¨ä½œå…³é”®å­—ï¼Œæè¿°åˆ‡å…¥ç‚¹çš„è¡Œä¸ºåŠ¨ä½œï¼Œä¾‹å¦‚ execution è¡¨ç¤ºæ‰§è¡Œåˆ°æŒ‡å®šåˆ‡å…¥ç‚¹</li>
<li>public: è®¿é—®ä¿®é¥°ç¬¦ï¼Œè¿˜å¯ä»¥æ˜¯ publicï¼Œprivate ç­‰ï¼Œå¯ä»¥çœç•¥</li>
<li>Userï¼šè¿”å›å€¼ï¼Œå†™è¿”å›å€¼ç±»å‹</li>
<li>com.itheima.serviceï¼šåŒ…åï¼Œå¤šçº§åŒ…ä½¿ç”¨ç‚¹è¿æ¥</li>
<li>UserService: ç±» / æ¥å£åç§°</li>
<li>findByIdï¼šæ–¹æ³•å</li>
<li>int: å‚æ•°ï¼Œç›´æ¥å†™å‚æ•°çš„ç±»å‹ï¼Œå¤šä¸ªç±»å‹ç”¨é€—å·éš”å¼€</li>
<li>å¼‚å¸¸åï¼šæ–¹æ³•å®šä¹‰ä¸­æŠ›å‡ºæŒ‡å®šå¼‚å¸¸ï¼Œå¯ä»¥çœç•¥</li>
</ul>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å°±æ˜¯è¦æ‰¾åˆ°éœ€è¦å¢å¼ºçš„æ–¹æ³•</p>
<h3 id="è¯­æ³•æ ¼å¼å’Œé€šé…ç¬¦å·"><a class="markdownIt-Anchor" href="#è¯­æ³•æ ¼å¼å’Œé€šé…ç¬¦å·">#</a> è¯­æ³•æ ¼å¼å’Œé€šé…ç¬¦å·</h3>
<ul>
<li>
<p><code>*</code> : å•ä¸ªç‹¬ç«‹çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºç°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‰ç¼€æˆ–è€…åç¼€çš„åŒ¹é…ç¬¦å‡ºç°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">executionï¼ˆpublic * com.itheima.*.UserService.find*(*))</span><br></pre></td></tr></table></figure>
<p>åŒ¹é… com.itheima åŒ…ä¸‹çš„ä»»æ„åŒ…ä¸­çš„ UserService ç±»æˆ–æ¥å£ä¸­æ‰€æœ‰ find å¼€å¤´çš„å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•</p>
</li>
<li>
<p><code>..</code> ï¼šå¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºç°ï¼Œå¸¸ç”¨äºç®€åŒ–åŒ…åä¸å‚æ•°çš„ä¹¦å†™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">executionï¼ˆpublic User com..UserService.findById(..))</span><br></pre></td></tr></table></figure>
<p>åŒ¹é… com åŒ…ä¸‹çš„ä»»æ„åŒ…ä¸­çš„ UserService ç±»æˆ–æ¥å£ä¸­æ‰€æœ‰åç§°ä¸º findById çš„æ–¹æ³•</p>
</li>
<li>
<p><code>+</code> ï¼šä¸“ç”¨äºåŒ¹é…å­ç±»ç±»å‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* *..*Service+.*(..))</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä½¿ç”¨ç‡è¾ƒä½ï¼Œæè¿°å­ç±»çš„ï¼Œç»§æ‰¿æœºä¼šå°±ä¸€æ¬¡ï¼Œä½¿ç”¨éƒ½å¾ˆæ…é‡ï¼Œæ‰€ä»¥å¾ˆå°‘ç”¨å®ƒã€‚*Service+ï¼Œè¡¨ç¤ºæ‰€æœ‰ä»¥ Service ç»“å°¾çš„æ¥å£çš„å­ç±»ã€‚</p>
</li>
</ul>
<p><img data-src="java-SSM.assets/1630163744963.png" alt="1630163744963"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="keyword">void</span> com.itheima.dao.BookDao.update())</span><br><span class="line">åŒ¹é…æ¥å£ï¼Œèƒ½åŒ¹é…åˆ°</span><br><span class="line">execution(<span class="keyword">void</span> com.itheima.dao.impl.BookDaoImpl.update())</span><br><span class="line">åŒ¹é…å®ç°ç±»ï¼Œèƒ½åŒ¹é…åˆ°</span><br><span class="line">execution(* com.itheima.dao.impl.BookDaoImpl.update())</span><br><span class="line">è¿”å›å€¼ä»»æ„ï¼Œèƒ½åŒ¹é…åˆ°</span><br><span class="line">execution(* com.itheima.dao.impl.BookDaoImpl.update(*))</span><br><span class="line">è¿”å›å€¼ä»»æ„ï¼Œä½†æ˜¯updateæ–¹æ³•å¿…é¡»è¦æœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ— æ³•åŒ¹é…ï¼Œè¦æƒ³åŒ¹é…éœ€è¦åœ¨updateæ¥å£å’Œå®ç°ç±»æ·»åŠ å‚æ•°</span><br><span class="line">execution(<span class="keyword">void</span> com.*.*.*.*.update())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>,comåŒ…ä¸‹çš„ä»»æ„åŒ…ä¸‰å±‚åŒ…ä¸‹çš„ä»»æ„ç±»çš„updateæ–¹æ³•ï¼ŒåŒ¹é…åˆ°çš„æ˜¯å®ç°ç±»ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(<span class="keyword">void</span> com.*.*.*.update())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>,comåŒ…ä¸‹çš„ä»»æ„ä¸¤å±‚åŒ…ä¸‹çš„ä»»æ„ç±»çš„updateæ–¹æ³•ï¼ŒåŒ¹é…åˆ°çš„æ˜¯æ¥å£ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(<span class="keyword">void</span> *..update())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>ï¼Œæ–¹æ³•åæ˜¯updateçš„ä»»æ„åŒ…ä¸‹çš„ä»»æ„ç±»ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(* *..*(..))</span><br><span class="line">åŒ¹é…é¡¹ç›®ä¸­ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•ï¼Œèƒ½åŒ¹é…ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå½±å“èŒƒå›´å¹¿</span><br><span class="line">execution(* *..u*(..))</span><br><span class="line">åŒ¹é…é¡¹ç›®ä¸­ä»»æ„åŒ…ä»»æ„ç±»ä¸‹åªè¦ä»¥uå¼€å¤´çš„æ–¹æ³•ï¼Œupdateæ–¹æ³•èƒ½æ»¡è¶³ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(* *..*e(..))</span><br><span class="line">åŒ¹é…é¡¹ç›®ä¸­ä»»æ„åŒ…ä»»æ„ç±»ä¸‹åªè¦ä»¥eç»“å°¾çš„æ–¹æ³•ï¼Œupdateå’Œsaveæ–¹æ³•èƒ½æ»¡è¶³ï¼Œèƒ½åŒ¹é…</span><br><span class="line">execution(<span class="keyword">void</span> com..*())</span><br><span class="line">è¿”å›å€¼ä¸º<span class="keyword">void</span>ï¼ŒcomåŒ…ä¸‹çš„ä»»æ„åŒ…ä»»æ„ç±»ä»»æ„æ–¹æ³•ï¼Œèƒ½åŒ¹é…ï¼Œ*ä»£è¡¨çš„æ˜¯æ–¹æ³•</span><br><span class="line">execution(* com.itheima.*.*Service.find*(..))</span><br><span class="line">å°†é¡¹ç›®ä¸­æ‰€æœ‰ä¸šåŠ¡å±‚æ–¹æ³•çš„ä»¥findå¼€å¤´çš„æ–¹æ³•åŒ¹é…</span><br><span class="line">execution(* com.itheima.*.*Service.save*(..))</span><br><span class="line">å°†é¡¹ç›®ä¸­æ‰€æœ‰ä¸šåŠ¡å±‚æ–¹æ³•çš„ä»¥saveå¼€å¤´çš„æ–¹æ³•åŒ¹é…</span><br></pre></td></tr></table></figure>
<p>åé¢ä¸¤ç§æ›´ç¬¦åˆæˆ‘ä»¬å¹³å¸¸åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ç¼–å†™è§„åˆ™</p>
<h4 id="ä¹¦å†™æŠ€å·§"><a class="markdownIt-Anchor" href="#ä¹¦å†™æŠ€å·§">#</a> ä¹¦å†™æŠ€å·§</h4>
<p>å¯¹äºåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ç¼–å†™å…¶å®æ˜¯å¾ˆçµæ´»çš„ï¼Œé‚£ä¹ˆåœ¨ç¼–å†™çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æŠ€å·§è®©æˆ‘ä»¬ç”¨ç”¨:</p>
<ul>
<li>æ‰€æœ‰ä»£ç æŒ‰ç…§æ ‡å‡†è§„èŒƒå¼€å‘ï¼Œå¦åˆ™ä»¥ä¸‹æŠ€å·§å…¨éƒ¨å¤±æ•ˆ</li>
<li>æè¿°åˆ‡å…¥ç‚¹é€š **<mark> å¸¸æè¿°æ¥å£</mark> **ï¼Œè€Œä¸æè¿°å®ç°ç±»ï¼Œå¦‚æœæè¿°åˆ°å®ç°ç±»ï¼Œå°±å‡ºç°ç´§è€¦åˆäº†</li>
<li>è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦é’ˆå¯¹æ¥å£å¼€å‘å‡é‡‡ç”¨ public æè¿°ï¼ˆ<strong><mark>å¯çœç•¥è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦æè¿°</mark></strong>ï¼‰</li>
<li>è¿”å›å€¼ç±»å‹å¯¹äºå¢åˆ æ”¹ç±»ä½¿ç”¨ç²¾å‡†ç±»å‹åŠ é€ŸåŒ¹é…ï¼Œå¯¹äºæŸ¥è¯¢ç±»ä½¿ç”¨ * é€šé…å¿«é€Ÿæè¿°</li>
<li><strong><mark>åŒ…å</mark><strong>ä¹¦å†™</strong><mark>å°½é‡ä¸ä½¿ç”¨â€¦ åŒ¹é…</mark></strong>ï¼Œæ•ˆç‡è¿‡ä½ï¼Œå¸¸ç”¨ * åšå•ä¸ªåŒ…æè¿°åŒ¹é…ï¼Œæˆ–ç²¾å‡†åŒ¹é…</li>
<li><strong><mark>æ¥å£å / ç±»å</mark><strong>ä¹¦å†™åç§°ä¸æ¨¡å—ç›¸å…³çš„</strong><mark>é‡‡ç”¨ * åŒ¹é…</mark></strong>ï¼Œä¾‹å¦‚ UserService ä¹¦å†™æˆ * Serviceï¼Œç»‘å®šä¸šåŠ¡å±‚æ¥å£å</li>
<li><strong><mark>æ–¹æ³•å</mark><strong>ä¹¦å†™ä»¥</strong><mark>åŠ¨è¯</mark><strong>è¿›è¡Œ</strong><mark>ç²¾å‡†åŒ¹é…</mark></strong>ï¼Œåè¯é‡‡ç”¨<em>åŒ¹é…ï¼Œä¾‹å¦‚ getById ä¹¦å†™æˆ getBy</em>,selectAll ä¹¦å†™æˆ selectAll</li>
<li>å‚æ•°è§„åˆ™è¾ƒä¸ºå¤æ‚ï¼Œæ ¹æ®ä¸šåŠ¡æ–¹æ³•çµæ´»è°ƒæ•´</li>
<li>é€šå¸¸ **<mark> ä¸ä½¿ç”¨å¼‚å¸¸</mark><strong>ä½œä¸º</strong><mark>åŒ¹é…</mark> ** è§„åˆ™</li>
</ul>
<p>å…±æä¾›äº† 5 ç§é€šçŸ¥ç±»å‹:</p>
<ul>
<li>å‰ç½®é€šçŸ¥</li>
<li>åç½®é€šçŸ¥</li>
<li><strong><mark>ç¯ç»•é€šçŸ¥ (é‡ç‚¹)</mark></strong></li>
<li>è¿”å›åé€šçŸ¥ (äº†è§£)</li>
<li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥ (äº†è§£)</li>
</ul>
<p><img data-src="java-SSM.assets/1630166147697.png" alt="1630166147697"></p>
<p>(1) å‰ç½®é€šçŸ¥ï¼Œè¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œå‰ï¼Œç±»ä¼¼äºåœ¨ä»£ç  1 æˆ–è€…ä»£ç  2 æ·»åŠ å†…å®¹</p>
<p>(2) åç½®é€šçŸ¥ï¼Œè¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œåï¼Œä¸ç®¡æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œï¼Œç±»ä¼¼äºåœ¨ä»£ç  5 æ·»åŠ å†…å®¹</p>
<p>(3) è¿”å›åé€šçŸ¥ï¼Œè¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œåï¼Œåªæœ‰æ–¹æ³•æ­£å¸¸æ‰§è¡Œç»“æŸåæ‰è¿›è¡Œï¼Œç±»ä¼¼äºåœ¨ä»£ç  3 æ·»åŠ å†…å®¹ï¼Œå¦‚æœæ–¹æ³•æ‰§è¡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè¿”å›åé€šçŸ¥å°†ä¸ä¼šè¢«æ·»åŠ </p>
<p>(4) æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥ï¼Œè¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åï¼Œåªæœ‰æ–¹æ³•æ‰§è¡Œå‡ºå¼‚å¸¸æ‰è¿›è¡Œï¼Œç±»ä¼¼äºåœ¨ä»£ç  4 æ·»åŠ å†…å®¹ï¼Œåªæœ‰æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰ä¼šè¢«æ·»åŠ </p>
<p>(5) ç¯ç»•é€šçŸ¥ï¼Œç¯ç»•é€šçŸ¥åŠŸèƒ½æ¯”è¾ƒå¼ºå¤§ï¼Œå®ƒå¯ä»¥è¿½åŠ åŠŸèƒ½åˆ°æ–¹æ³•æ‰§è¡Œçš„å‰åï¼Œè¿™ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼ï¼Œå®ƒå¯ä»¥å®ç°å…¶ä»–å››ç§é€šçŸ¥ç±»å‹çš„åŠŸèƒ½</p>
<h5 id="å‰ç½®é€šçŸ¥"><a class="markdownIt-Anchor" href="#å‰ç½®é€šçŸ¥">#</a> å‰ç½®é€šçŸ¥</h5>
<p>ä¿®æ”¹ MyAdvice, åœ¨ before æ–¹æ³•ä¸Šæ·»åŠ  <code>@Beforeæ³¨è§£</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="comment">//æ­¤å¤„ä¹Ÿå¯ä»¥å†™æˆ @Before(&quot;MyAdvice.pt()&quot;),ä¸å»ºè®®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="åç½®é€šçŸ¥"><a class="markdownIt-Anchor" href="#åç½®é€šçŸ¥">#</a> åç½®é€šçŸ¥</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ç¯ç»•é€šçŸ¥"><a class="markdownIt-Anchor" href="#ç¯ç»•é€šçŸ¥">#</a> ç¯ç»•é€šçŸ¥</h5>
<h6 id="åŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#åŸºæœ¬ä½¿ç”¨">#</a> åŸºæœ¬ä½¿ç”¨</h6>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before advice ...&quot;</span>);</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå¯¹åŸå§‹æ“ä½œçš„è°ƒç”¨</span></span><br><span class="line">        pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;around after advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ‡å‡†æ ¼å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(int com.itheima.dao.BookDao.select())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;pt2()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">aroundSelect</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before advice ...&quot;</span>);</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºå¯¹åŸå§‹æ“ä½œçš„è°ƒç”¨</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;around after advice ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¯´æ˜:</strong></p>
<p>â€‹	ä¸ºä»€ä¹ˆè¿”å›çš„æ˜¯ Object è€Œä¸æ˜¯ int çš„ä¸»è¦åŸå› æ˜¯ Object ç±»å‹æ›´é€šç”¨ã€‚</p>
<p>â€‹	åœ¨ç¯ç»•é€šçŸ¥ä¸­æ˜¯å¯ä»¥å¯¹åŸå§‹æ–¹æ³•è¿”å›å€¼å°±è¡Œä¿®æ”¹çš„ã€‚</p>
<h5 id="è¿”å›åé€šçŸ¥"><a class="markdownIt-Anchor" href="#è¿”å›åé€šçŸ¥">#</a> è¿”å›åé€šçŸ¥</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(int com.itheima.dao.BookDao.select())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt2()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¼‚å¸¸åé€šçŸ¥"><a class="markdownIt-Anchor" href="#å¼‚å¸¸åé€šçŸ¥">#</a> å¼‚å¸¸åé€šçŸ¥</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(void com.itheima.dao.BookDao.update())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(int com.itheima.dao.BookDao.select())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt2</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt2()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing advice ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºç¯ç»•é€šçŸ¥æ˜¯å¯ä»¥æ§åˆ¶åŸå§‹æ–¹æ³•æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æŠŠå¢å¼ºçš„ä»£ç å†™åœ¨è°ƒç”¨åŸå§‹æ–¹æ³•çš„ä¸åŒä½ç½®å°±å¯ä»¥å®ç°ä¸åŒçš„é€šçŸ¥ç±»å‹çš„åŠŸèƒ½ï¼Œå¦‚:</p>
<p><img data-src="java-SSM.assets/1630170090945.png" alt="1630170090945"></p>
<h5 id="-5"><a class="markdownIt-Anchor" href="#-5">#</a> </h5>
<h4 id="è·å–å‚æ•°"><a class="markdownIt-Anchor" href="#è·å–å‚æ•°">#</a> è·å–å‚æ•°</h4>
<h5 id="éç¯ç»•é€šçŸ¥è·å–æ–¹å¼"><a class="markdownIt-Anchor" href="#éç¯ç»•é€šçŸ¥è·å–æ–¹å¼">#</a> éç¯ç»•é€šçŸ¥è·å–æ–¹å¼</h5>
<p>åœ¨æ–¹æ³•ä¸Šæ·»åŠ  JoinPoint, é€šè¿‡ JoinPoint æ¥è·å–å‚æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint jp)</span> </span><br><span class="line">        Object[] args = jp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        System.out.println(<span class="string">&quot;before advice ...&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//...å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="java-SSM.assets/1630233291929.png" alt="1630233291929"></p>
<p>å‚æ•°çš„ä¸ªæ•°æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°ç»„æ›´é€šé…äº›ã€‚</p>
<h5 id="ç¯ç»•é€šçŸ¥è·å–æ–¹å¼"><a class="markdownIt-Anchor" href="#ç¯ç»•é€šçŸ¥è·å–æ–¹å¼">#</a> ç¯ç»•é€šçŸ¥è·å–æ–¹å¼</h5>
<p>ç¯ç»•é€šçŸ¥ä½¿ç”¨çš„æ˜¯ ProceedingJoinPointï¼Œå› ä¸º ProceedingJoinPoint æ˜¯ JoinPoint ç±»çš„å­ç±»ï¼Œæ‰€ä»¥å¯¹äº ProceedingJoinPoint ç±»ä¸­åº”è¯¥ä¹Ÿä¼šæœ‰å¯¹åº”çš„ <code>getArgs()</code>  æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span><span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ App åæŸ¥çœ‹è¿è¡Œç»“æœï¼Œè¯´æ˜ ProceedingJoinPoint ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ getArgs () è·å–å‚æ•°</p>
<p><img data-src="java-SSM.assets/1630233974310.png" alt="1630233974310"></p>
<ul>
<li>
<p>pjp.proceed () æ–¹æ³•æ˜¯æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯:</p>
<p><img data-src="java-SSM.assets/1630234756123.png" alt="1630234756123"></p>
<ul>
<li>
<p>è°ƒç”¨æ— å‚æ•°çš„ proceedï¼Œå½“åŸå§‹æ–¹æ³•æœ‰å‚æ•°ï¼Œä¼šåœ¨è°ƒç”¨çš„è¿‡ç¨‹ä¸­è‡ªåŠ¨ä¼ å…¥å‚æ•°</p>
</li>
<li>
<p>æ‰€ä»¥è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä»»æ„ä¸€ä¸ªéƒ½å¯ä»¥å®ŒæˆåŠŸèƒ½</p>
</li>
<li>
<p>ä½†æ˜¯å½“éœ€è¦ä¿®æ”¹åŸå§‹æ–¹æ³•çš„å‚æ•°æ—¶ï¼Œå°±åªèƒ½é‡‡ç”¨å¸¦æœ‰å‚æ•°çš„æ–¹æ³•ï¼Œå¦‚ä¸‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        args[<span class="number">0</span>] = <span class="number">666</span>;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed(args);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰äº†è¿™ä¸ªç‰¹æ€§åï¼Œå°±å¯ä»¥åœ¨ç¯ç»•é€šçŸ¥ä¸­å¯¹åŸå§‹æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ‹¦æˆªè¿‡æ»¤ï¼Œé¿å…ç”±äºå‚æ•°çš„é—®é¢˜å¯¼è‡´ç¨‹åºæ— æ³•æ­£ç¡®è¿è¡Œï¼Œä¿è¯ä»£ç çš„å¥å£®æ€§ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 id="è·å–è¿”å›å€¼"><a class="markdownIt-Anchor" href="#è·å–è¿”å›å€¼">#</a> è·å–è¿”å›å€¼</h4>
<p>å¯¹äºè¿”å›å€¼ï¼Œåªæœ‰è¿”å›å <code>AfterReturing</code>  å’Œç¯ç»• <code>Around</code>  è¿™ä¸¤ä¸ªé€šçŸ¥ç±»å‹å¯ä»¥è·å–ï¼Œå…·ä½“å¦‚ä½•è·å–ï¼Ÿ</p>
<h5 id="ç¯ç»•é€šçŸ¥è·å–è¿”å›å€¼"><a class="markdownIt-Anchor" href="#ç¯ç»•é€šçŸ¥è·å–è¿”å›å€¼">#</a> ç¯ç»•é€šçŸ¥è·å–è¿”å›å€¼</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        args[<span class="number">0</span>] = <span class="number">666</span>;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed(args);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ <code>ret</code>  å°±æ˜¯æ–¹æ³•çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥ç›´æ¥è·å–ï¼Œä¸ä½†å¯ä»¥è·å–ï¼Œå¦‚æœéœ€è¦è¿˜å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚</p>
<h5 id="è¿”å›åé€šçŸ¥è·å–è¿”å›å€¼"><a class="markdownIt-Anchor" href="#è¿”å›åé€šçŸ¥è·å–è¿”å›å€¼">#</a> è¿”å›åé€šçŸ¥è·å–è¿”å›å€¼</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;pt()&quot;,returning = &quot;ret&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object ret)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning advice ...&quot;</span>+ret);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><mark>æ³¨æ„:</mark></p>
<p>(1) å‚æ•°åçš„é—®é¢˜</p>
<p><img data-src="java-SSM.assets/1630237320870.png" alt="1630237320870"></p>
<p>(2) afterReturning æ–¹æ³•å‚æ•°ç±»å‹çš„é—®é¢˜</p>
<p>å‚æ•°ç±»å‹å¯ä»¥å†™æˆ Stringï¼Œä½†æ˜¯ä¸ºäº†èƒ½åŒ¹é…æ›´å¤šçš„å‚æ•°ç±»å‹ï¼Œæœ€å¥½å†™æˆ Object ç±»å‹</p>
<p>(3) afterReturning æ–¹æ³•å‚æ•°çš„é¡ºåºé—®é¢˜</p>
<p><img data-src="java-SSM.assets/1630237586682.png" alt="1630237586682"></p>
<p>è¿è¡Œ App åæŸ¥çœ‹è¿è¡Œç»“æœï¼Œè¯´æ˜è¿”å›å€¼å·²ç»è¢«è·å–åˆ°</p>
<p><img data-src="java-SSM.assets/1630237372286.png" alt="1630237372286"></p>
<h4 id="-6"><a class="markdownIt-Anchor" href="#-6">#</a> </h4>
<h4 id="è·å–å¼‚å¸¸"><a class="markdownIt-Anchor" href="#è·å–å¼‚å¸¸">#</a> è·å–å¼‚å¸¸</h4>
<p>å¯¹äºè·å–æŠ›å‡ºçš„å¼‚å¸¸ï¼Œåªæœ‰æŠ›å‡ºå¼‚å¸¸å <code>AfterThrowing</code>  å’Œç¯ç»• <code>Around</code>  è¿™ä¸¤ä¸ªé€šçŸ¥ç±»å‹å¯ä»¥è·å–</p>
<h5 id="ç¯ç»•é€šçŸ¥è·å–å¼‚å¸¸"><a class="markdownIt-Anchor" href="#ç¯ç»•é€šçŸ¥è·å–å¼‚å¸¸">#</a> ç¯ç»•é€šçŸ¥è·å–å¼‚å¸¸</h5>
<p>åªéœ€è¦å°†å¼‚å¸¸æ•è·ï¼Œå°±å¯ä»¥è·å–åˆ°åŸå§‹æ–¹æ³•çš„å¼‚å¸¸ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span>&#123;</span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        System.out.println(Arrays.toString(args));</span><br><span class="line">        args[<span class="number">0</span>] = <span class="number">666</span>;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            ret = pjp.proceed(args);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Throwable throwable)&#123;</span><br><span class="line">            t.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ catch æ–¹æ³•ä¸­å°±å¯ä»¥è·å–åˆ°å¼‚å¸¸</p>
<h5 id="æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥è·å–å¼‚å¸¸"><a class="markdownIt-Anchor" href="#æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥è·å–å¼‚å¸¸">#</a> æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥è·å–å¼‚å¸¸</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.dao.BookDao.findName(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;pt()&quot;,throwing = &quot;t&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Throwable t)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing advice ...&quot;</span>+t);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//å…¶ä»–çš„ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®©åŸå§‹æ–¹æ³•æŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findName</span><span class="params">(<span class="type">int</span> id,String password)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;itcast&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><mark>æ³¨æ„:</mark></p>
<p><img data-src="java-SSM.assets/1630239939043.png" alt="1630239939043"></p>
<p>å¼‚å¸¸ä¿¡æ¯</p>
<p><img data-src="java-SSM.assets/1630239997560.png" alt="1630239997560"></p>
<h2 id="ç™¾åº¦ç½‘ç›˜å¯†ç æ•°æ®å…¼å®¹å¤„ç†"><a class="markdownIt-Anchor" href="#ç™¾åº¦ç½‘ç›˜å¯†ç æ•°æ®å…¼å®¹å¤„ç†">#</a> ç™¾åº¦ç½‘ç›˜å¯†ç æ•°æ®å…¼å®¹å¤„ç†</h2>
<h4 id="éœ€æ±‚åˆ†æ"><a class="markdownIt-Anchor" href="#éœ€æ±‚åˆ†æ">#</a> éœ€æ±‚åˆ†æ</h4>
<p>éœ€æ±‚ï¼šå¯¹ç™¾åº¦ç½‘ç›˜åˆ†äº«é“¾æ¥è¾“å…¥å¯†ç æ—¶å°¾éƒ¨å¤šè¾“å…¥çš„ç©ºæ ¼åšå…¼å®¹å¤„ç†ã€‚</p>
<p><img data-src="java-SSM.assets/1630240203033.png" alt="1630240203033"></p>
<p>é—®é¢˜æè¿°:</p>
<ul>
<li>
<p>ç‚¹å‡»é“¾æ¥ï¼Œä¼šæç¤ºï¼Œè¯·è¾“å…¥æå–ç </p>
<p><img data-src="java-SSM.assets/1630240528228.png" alt="1630240528228"></p>
</li>
</ul>
<h4 id="å…·ä½“å®ç°"><a class="markdownIt-Anchor" href="#å…·ä½“å®ç°">#</a> å…·ä½“å®ç°</h4>
<h5 id="æ­¥éª¤1å¼€å¯springaopçš„æ³¨è§£åŠŸèƒ½"><a class="markdownIt-Anchor" href="#æ­¥éª¤1å¼€å¯springaopçš„æ³¨è§£åŠŸèƒ½">#</a> æ­¥éª¤ 1: å¼€å¯ SpringAOP çš„æ³¨è§£åŠŸèƒ½</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.ityueheng&quot;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤2ç¼–å†™é€šçŸ¥ç±»"><a class="markdownIt-Anchor" href="#æ­¥éª¤2ç¼–å†™é€šçŸ¥ç±»">#</a> æ­¥éª¤ 2: ç¼–å†™é€šçŸ¥ç±»</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(boolean com.ityueheng.service.*Service.*(*,*))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤3æ·»åŠ ç¯ç»•é€šçŸ¥"><a class="markdownIt-Anchor" href="#æ­¥éª¤3æ·»åŠ ç¯ç»•é€šçŸ¥">#</a> æ­¥éª¤ 3: æ·»åŠ ç¯ç»•é€šçŸ¥</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(boolean com.ityueheng.service.*Service.*(*,*))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;DataAdvice.servicePt()&quot;)</span></span><br><span class="line">    <span class="comment">// @Around(&quot;servicePt()&quot;)è¿™ä¸¤ç§å†™æ³•éƒ½å¯¹</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">trimStr</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤4å®Œæˆæ ¸å¿ƒä¸šåŠ¡å¤„ç†å‚æ•°ä¸­çš„ç©ºæ ¼"><a class="markdownIt-Anchor" href="#æ­¥éª¤4å®Œæˆæ ¸å¿ƒä¸šåŠ¡å¤„ç†å‚æ•°ä¸­çš„ç©ºæ ¼">#</a> æ­¥éª¤ 4: å®Œæˆæ ¸å¿ƒä¸šåŠ¡ï¼Œå¤„ç†å‚æ•°ä¸­çš„ç©ºæ ¼</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataAdvice</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(boolean com.ityueheng.service.*Service.*(*,*))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;DataAdvice.servicePt()&quot;)</span></span><br><span class="line">    <span class="comment">// @Around(&quot;servicePt()&quot;)è¿™ä¸¤ç§å†™æ³•éƒ½å¯¹</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">trimStr</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//è·å–åŸå§‹æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å‚æ•°æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="keyword">if</span>(args[i].getClass().equals(String.class))&#123;</span><br><span class="line">                args[i] = args[i].toString().trim();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°†ä¿®æ”¹åçš„å‚æ•°ä¼ å…¥åˆ°åŸå§‹æ–¹æ³•çš„æ‰§è¡Œä¸­</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> pjp.proceed(args);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ­¥éª¤5è¿è¡Œç¨‹åº-2"><a class="markdownIt-Anchor" href="#æ­¥éª¤5è¿è¡Œç¨‹åº-2">#</a> æ­¥éª¤ 5: è¿è¡Œç¨‹åº</h5>
<p>ä¸ç®¡å¯†ç  <code>root</code>  å‰åæ˜¯å¦åŠ ç©ºæ ¼ï¼Œæœ€ç»ˆæ§åˆ¶å°æ‰“å°çš„éƒ½æ˜¯ true</p>
<h5 id="æ­¥éª¤6ä¼˜åŒ–æµ‹è¯•"><a class="markdownIt-Anchor" href="#æ­¥éª¤6ä¼˜åŒ–æµ‹è¯•">#</a> æ­¥éª¤ 6: ä¼˜åŒ–æµ‹è¯•</h5>
<p>ä¸ºäº†èƒ½æ›´å¥½çš„çœ‹å‡º AOP å·²ç»ç”Ÿæ•ˆï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ ResourcesImpl ç±»ï¼Œåœ¨æ–¹æ³•ä¸­å°†å¯†ç çš„é•¿åº¦è¿›è¡Œæ‰“å°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourcesDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">ResourcesDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">readResources</span><span class="params">(String url, String password)</span> &#123;</span><br><span class="line">        System.out.println(password.length());</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿæ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">return</span> password.equals(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡è¿è¡ŒæˆåŠŸï¼Œå°±å¯ä»¥æ ¹æ®æœ€ç»ˆæ‰“å°çš„é•¿åº¦æ¥çœ‹çœ‹ï¼Œå­—ç¬¦ä¸²çš„ç©ºæ ¼æœ‰æ²¡æœ‰è¢«å»é™¤æ‰ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p><img data-src="java-SSM.assets/1630242491831.png" alt="1630242491831"></p>
<h2 id="-7"><a class="markdownIt-Anchor" href="#-7">#</a> </h2>
<h2 id="aopæ€»ç»“"><a class="markdownIt-Anchor" href="#aopæ€»ç»“">#</a> AOP æ€»ç»“</h2>
<h3 id="aopçš„æ ¸å¿ƒæ¦‚å¿µ"><a class="markdownIt-Anchor" href="#aopçš„æ ¸å¿ƒæ¦‚å¿µ">#</a> AOP çš„æ ¸å¿ƒæ¦‚å¿µï¼š</h3>
<p>æ¦‚å¿µï¼šAOP (Aspect Oriented Programming) é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä¸€ç§ç¼–ç¨‹èŒƒå¼</p>
<p>ä½œç”¨ï¼šå°±æ˜¯åœ¨ä¸æƒŠåŠ¨åŸå§‹ä»£ç çš„æƒ…å†µä¸‹ä¸ºæ–¹æ³•å¢åŠ åŠŸèƒ½</p>
<p>æ ¸å¿ƒæ¦‚å¿µ</p>
<ul>
<li>ä»£ç†ï¼ˆproxyï¼‰:SpringAOP çš„æ ¸å¿ƒæœ¬è´¨å°±æ˜¯é‡‡ç”¨ä»£ç†æ¨¡å¼æ¥å®ç°çš„</li>
<li>è¿æ¥ç‚¹ (JoinPoint)ï¼šåœ¨ springAOP ä¸­ï¼Œç†è§£ä¸ºä»»æ„æ–¹æ³•çš„æ‰§è¡Œ</li>
<li>åˆ‡å…¥ç‚¹ (Poincut)ï¼šåŒ¹é…è¿æ¥ç‚¹çš„å¼å­ï¼Œä¹Ÿæ˜¯å…·æœ‰å…±æ€§åŠŸèƒ½çš„æ–¹æ³•æè¿°</li>
<li>é€šçŸ¥ (Advice)ï¼šè‹¥å¹²ä¸ªæ–¹æ³•çš„å…±æ€§åŠŸèƒ½ï¼Œåœ¨åˆ‡å…¥ç‚¹æ‰§è¡Œï¼Œæœ€ç»ˆä½“ç°ä¸ºä¸€ä¸ªæ–¹æ³•</li>
<li>åˆ‡é¢ (Aspect): æè¿°åˆ‡å…¥ç‚¹å’Œé€šçŸ¥çš„å¯¹åº”å…³ç³»</li>
<li>ç›®æ ‡å¯¹è±¡ (Target)ï¼šè¢«ä»£ç†çš„åŸå§‹å¯¹è±¡æˆä¸ºç›®æ ‡å¯¹è±¡</li>
</ul>
<h3 id="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a class="markdownIt-Anchor" href="#åˆ‡å…¥ç‚¹è¡¨è¾¾å¼">#</a> åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h3>
<ul>
<li>åˆ‡å…¥ç‚¹æ ‡å‡†è¡¨è¾¾å¼æ ¼å¼ï¼šåŠ¨ä½œå…³é”®å­— (è®¿é—®ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ åŒ…åã€‚ç±» / æ¥å£åã€‚æ–¹æ³•åï¼ˆå‚æ•°ï¼‰å¼‚å¸¸å)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.service.*service.*(..))</span><br></pre></td></tr></table></figure>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æè¿°é€šé…ç¬¦ï¼š</p>
<ul>
<li>ä½œç”¨ï¼šç”¨äºå¿«é€Ÿæè¿°ï¼ŒèŒƒå›´æè¿°</li>
<li>*: åŒ¹é…ä»»æ„çš„ç¬¦å·ï¼ˆå¸¸ç”¨ï¼‰</li>
<li>â€¦ï¼šåŒ¹é…å¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å· (å¸¸ç”¨)</li>
<li>+: åŒ¹é…å­ç±»ç±»å‹</li>
</ul>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾æ˜¯ä¹¦å†™æŠ€å·§</p>
<ol>
<li>æŒ‰ç…§æ ‡å‡†çš„è§„èŒƒå¼€å‘</li>
<li>æŸ¥è¯¢æ“ä½œçš„è¿”å›å€¼å»ºè®®ä½¿ç”¨ * åŒ¹é…</li>
<li>å‡å°‘é€‚ç”¨â€¦ çš„å½¢å¼æè¿°åŒ…</li>
<li>å¯¹æ¥å£è¿›è¡Œæè¿°ï¼Œä½¿ç”¨è¡¨ç¤ºæ¨¡å—åç§°ï¼Œä¾‹å¦‚ UserService çš„åŒ¹é…æè¿°ä¸º * Service</li>
<li>æ–¹æ³•åä¹¦å†™ä¿ç•™åŠ¨è¯ï¼Œä¾‹å¦‚ getï¼Œä½¿ç”¨<em>è¡¨ç¤ºåè¯ï¼Œä¾‹å¦‚ getById åŒ¹é…æè¿°ä¸º getBy</em></li>
<li>å‚æ•°æ ¹æ®å®é™…æƒ…å†µçµæ´»è¿›è¡Œè°ƒæ•´</li>
</ol>
<h3 id="äº”ç§é€šçŸ¥ç±»å‹"><a class="markdownIt-Anchor" href="#äº”ç§é€šçŸ¥ç±»å‹">#</a> äº”ç§é€šçŸ¥ç±»å‹</h3>
<ul>
<li>å‰ç½®é€šçŸ¥</li>
<li>åç½®é€šçŸ¥</li>
<li>ç¯ç»•é€šçŸ¥ (é‡ç‚¹)
<ul>
<li>ç¯ç»•é€šçŸ¥ä¾èµ–å½¢å‚ ProceedingJoinPoint æ‰èƒ½å®ç°å¯¹åŸå§‹æ–¹æ³•çš„è°ƒç”¨</li>
<li>ç¯ç»•é€šçŸ¥å¯ä»¥éš”ç¦»åŸå§‹æ–¹æ³•çš„è°ƒç”¨æ‰§è¡Œ</li>
<li>ç¯ç»•é€šçŸ¥è¿”å›å€¼è®¾ç½®ä¸º Object ç±»å‹</li>
<li>ç¯ç»•é€šçŸ¥ä¸­å¯ä»¥å¯¹åŸå§‹æ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸è¿›è¡Œå¤„ç†</li>
</ul>
</li>
<li>è¿”å›åé€šçŸ¥</li>
<li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li>
</ul>
<h3 id="é€šçŸ¥ä¸­è·å–å‚æ•°"><a class="markdownIt-Anchor" href="#é€šçŸ¥ä¸­è·å–å‚æ•°">#</a> é€šçŸ¥ä¸­è·å–å‚æ•°</h3>
<ul>
<li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•çš„å‚æ•°ï¼Œæ‰€æœ‰çš„é€šçŸ¥ç±»å‹éƒ½å¯ä»¥è·å–å‚æ•°</li>
</ul>
<p>JoinPoint: é€‚ç”¨äºå‰ç½®ã€åç½®ã€è¿”å›åã€æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</p>
<p>proceedingJoinPointï¼šé€‚ç”¨äºç¯ç»•é€šçŸ¥</p>
<ul>
<li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•è¿”å›å€¼ï¼Œå‰ç½®å’ŒæŠ›å‡ºå¼‚å¸¸åé€šçŸ¥æ˜¯æ²¡æœ‰è¿”å›å€¼ï¼Œåç½®é€šçŸ¥å¯æœ‰å¯æ— ï¼Œæ‰€ä»¥ä¸åšç ”ç©¶
<ul>
<li>è¿”å›åé€šçŸ¥</li>
<li>ç¯ç»•é€šçŸ¥</li>
</ul>
</li>
<li>è·å–åˆ‡å…¥ç‚¹æ–¹æ³•è¿è¡Œå¼‚å¸¸ä¿¡æ¯ï¼Œå‰ç½®å’Œè¿”å›åé€šçŸ¥æ˜¯ä¸ä¼šæœ‰ï¼Œåç½®é€šçŸ¥å¯æœ‰å¯æ— ï¼Œæ‰€ä»¥ä¸åšç ”ç©¶
<ul>
<li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li>
<li>ç¯ç»•é€šçŸ¥</li>
</ul>
</li>
</ul>
<h2 id="-8"><a class="markdownIt-Anchor" href="#-8">#</a> </h2>
<h2 id="aopäº‹åŠ¡ç®¡ç†"><a class="markdownIt-Anchor" href="#aopäº‹åŠ¡ç®¡ç†">#</a> AOP äº‹åŠ¡ç®¡ç†</h2>

                
                <p class="end">__END__</p>
            </div>
            <div class="article-footer">
                <div class="suffix-box">
    <div class="suffix-box-left">
        <img src="/image/sidebar/20221215172034.jpg" alt="Live For Code">
    </div>
    <div class="suffix-box-right">
        <span class="suffix-box-title">æ–‡ç« ä½œè€…ï¼š</span>Live For Code
        <br>
        <span class="suffix-box-title">æ–‡ç« å‡ºå¤„ï¼š</span><a href="/computer-science/java/course-1/%E7%AC%AC%E4%B8%80%E5%91%A8%E8%AE%A1%E7%AE%97/" target="_blank">SpringBoot</a>
        <br>
        <span class="suffix-box-title">ä½œè€…ç­¾åï¼š</span>å†å¿«çš„AE86,ä¹Ÿè¿½ä¸ä¸Šååœ¨å¥”é©°ä¸Šçš„å¤æ ‘å§!
        <br>
        <span class="suffix-box-title">å…³äºä¸»é¢˜ï¼š</span><a href="https://github.com/first19326/Hexo-LiveForCode" target="_blank">Hexo - Live For Code</a>
        <br>
        <span class="suffix-box-title">ç‰ˆæƒå£°æ˜ï¼š</span>æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" title="BY-NC-SA" target="_blank">BY-NC-SA</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„
        <br>
    </div>
    <div style="clear: both;"></div>
</div>
                
                    <div class="category">
                        åˆ†ç±»ï¼š
                        
                            <a href="/categories/computer-science/">è®¡ç®—æœºç§‘å­¦</a>
                        
                            <a href="/categories/computer-science/java/">Java</a>
                        
                            <a href="/categories/computer-science/java/course-1/">é›¶åŸºç¡€å­¦Javaè¯­è¨€-æµ™æ±Ÿå¤§å­¦-ç¿æº</a>
                        
                    </div>
                
                
                <div class="article-prev-next">
                    
                        <a href="/%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/" class="prev-prefix">Â« </a> ä¸Šä¸€ç¯‡ï¼š    <a href="/%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/" title="å‘å¸ƒäº 2022-12-15 11:52">cookie&session</a>
                        <br>
                    
                    
                        <a href="/photos/" class="next-prefix">Â» </a> ä¸‹ä¸€ç¯‡ï¼š    <a href="/photos/" title="å‘å¸ƒäº 2022-01-20 08:52">photos</a>
                    
                </div>
            </div>
            
    <div class="article-comments">
        
            <div class="comments-title">
                è¯„è®ºåˆ—è¡¨
            </div>
        
        <div class="comments-content"></div>
    </div>

        </div>
    
</div>
    <div id="footer"></div>
    <div id="sidebar">
    <div class="menu-wrap" style="display:none;">
        
            <div class="menu-notice">
                <span class="iconfont icon-notice"></span>
                <div class="notice">
                    <span>èœå•ä¸­æœ‰å½©è›‹å“¦!</span>
                </div>
            </div>
        
        <nav class="menu">
            <div class="menu-introduce"> 
                <div class="introduce-avatar">
                    <img src="/image/sidebar/20221215172034.jpg">
                </div> 
                <div class="introduce-info"> 
                    <div class="introduce-user"><span>Live For Code</span></div>
                </div> 
            </div> 
            <div class="menu-list">
                <ul>
                    
                        <li class=""><a href="/" class="" target="_self"><span class="iconfont icon-home-fill"></span>é¦–é¡µ</a></li>
                    
                        <li class=""><a href="/category" class="" target="_self"><span class="iconfont icon-folder-fill"></span>åˆ†ç±»</a></li>
                    
                        <li class=""><a href="/tag" class="" target="_self"><span class="iconfont icon-discount-fill"></span>æ ‡ç­¾</a></li>
                    
                        <li class=""><a href="https://www.novipnoad.com/" class="" target="_blank"><span class="iconfont icon-calendar-fill"></span>NOç”µå½±</a></li>
                    
                        <li class=""><a href="/donate" class="" target="_self"><span class="iconfont icon-heart-fill"></span>ç”Ÿæ´»å†™çœŸ</a></li>
                    
                        <li class=""><a href="/about" class="" target="_self"><span class="iconfont icon-about-fill"></span>å…³äº</a></li>
                    
                        <li class=""><a href="https://www.douyin.com/" class="" target="_blank"><span class="iconfont icon-rss"></span>æŠ–éŸ³</a></li>
                    
                        <li class=""><a href="javascript:;" class="search" target="_self"><span class="iconfont icon-search-menu"></span>æœç´¢</a></li>
                    
                        <li class=""><a href="/comment" class="" target="_self"><span class="iconfont icon-comments-fill"></span>ç•™è¨€æ¿</a></li>
                    
                        <li class=""><a href="/friend" class="" target="_self"><span class="iconfont icon-link"></span>å‹æƒ…é“¾æ¥</a></li>
                    
                </ul> 
            </div> 
            <div class="menu-link">
                <div class="box">
                    <div class="image-box"></div>
                </div>
                
                    <a name="çŸ¥ä¹" href="https://zhihu.com/people/worstone-29" class="" target="_blank" data=""><span class="iconfont icon-zhihu"></span></a>
                
                    <a name="å¾®åš" href="https://weibo.com/u/5749847477" class="" target="_blank" data=""><span class="iconfont icon-weibo"></span></a>
                
                    <a name="QQ" href="javascript:;" class="image" target="_self" data="/image/sidebar/7c189ea77fd8b5624d3abe3418c8117.jpg"><span class="iconfont icon-qq"></span></a>
                
                    <a name="å¾®ä¿¡" href="javascript:;" class="image" target="_self" data="/image/sidebar/ee387aca83f7df7c06ed1c09e5348a7.png"><span class="iconfont icon-wechat"></span></a>
                
                    <a name="GitHub" href="https://github.com/first19326" class="" target="_blank" data=""><span class="iconfont icon-github"></span></a>
                
            </div> 
        </nav>
        <button class="menu-button-close"></button>
        <div class="morph-shape" id="morph-shape" data-morph-open="M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none">
                <path d="M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z"/>
            </svg>
        </div>
    </div>
    <button class="menu-button-open">MENU</button>
    <div class="menu-cover"></div>
</div>
    <link type="text/css" rel="stylesheet" href="/css/search.css">
<script type="text/javascript" src="/js/iscroll.js"></script>
<script type="text/javascript" src="/js/instantsearch.min.js"></script>
<div class="search-window">
    <div class="search-content">
        <div class="search-content-icon">
            <i class="iconfont icon-search"></i>
        </div>
        <div id="search-input" class="search-input"></div>
    </div>

    <div class="search-scroll">
        <div class="search-result">
            <div id="search-stats" class="search-stats"></div>
            <div id="search-hits"></div>
            <div id="search-pagination" class="search-pagination"></div>
        </div>
    </div>

    <span class="search-close-icon">
        <i class="iconfont icon-close"></i>
    </span>
</div>
    <div id="tools">
    <div class="progressbar-top"></div>

    
        <link type="text/css" rel="stylesheet" href="/css/APlayer.css">
        <script type="text/javascript" src="/js/APlayer.min.js"></script>
        <script type="text/javascript" src="/js/Meting.min.js"></script>
        <meting-js id="3778678" lrcshow="false" server="netease" type="playlist" fixed="true" autoplay="false" loop="all" order="random" preload="auto" volume="0.67" mutex="true"></meting-js>
    
    
    <div class="wrap-right">
        <div class="setting">
            <div class="iconbox favorites" switch="false">
                <span class="iconfont icon-favorites"></span>
                <span class="icontext">å…³æ³¨</span>
            </div>
            <div class="iconbox mode">
                <div class="light">
                    <span class="iconfont icon-daymode"></span>
                    <span class="icontext">æµ…è‰²æ¨¡å¼</span>
                </div>
                <div class="dark">
                    <span class="iconfont icon-nightmode-fill"></span>
                    <span class="icontext">æ·±è‰²æ¨¡å¼</span>
                </div>
            </div>
            <a href="javascript:;" target="_self" class="search">
                <div class="iconbox">
                    <span class="iconfont icon-search-menu"></span>
                    <span class="icontext">æœç´¢</span>
                </div>
            </a>
            <div class="iconbox bottom">
                <div style="display: inline-block; transform: rotate(180deg);">
                    <span class="iconfont icon-top"></span>
                </div>
                <span class="icontext">è·³è‡³åº•éƒ¨</span>
            </div>
        </div>
        <div class="iconbox set">
            <div style="display: inline-block;">
                <span class="iconfont icon-setting"></span>
            </div>
            <span class="icontext">è®¾ç½®</span>
        </div>
        <div class="iconbox top">
            <span class="iconfont icon-top"></span>
            <span class="icontext">è¿”å›é¡¶éƒ¨</span>
        </div>
    </div>
    <div class="loading"></div>
</div>
    <script>
    window.config = {
        GitHubUserName     : "lin-yueheng",
        GitHubRepositories : "Hexo-LiveForCode",

        User             : "Live For Code",
        UserAvatar       : "/image/sidebar/20221215172034.jpg",
        WebsiteStartDate : "2022-12-15",

        WebsiteTitleBlur         : "(â—Â´ê’³`â—) Hi, Live For Code",
        WebsiteTitleBlurTimeOut  : 500,
        WebsiteTitleFocus        : "(*Â´âˆ‡ï½€*) æ¬¢è¿å›æ¥!",
        WebsiteTitleFocusTimeOut : 1000,
        WebsiteFavicon           : "/image/website/gu.png",

        ProgressBar : {
            id       : "topProgressBar",
            color    : "#77B6FF",
            height   : "2px",
            duration : 0.2
        },

        Loading: {
            rebound : {
                tension  : 16,
                friction : 5
            },
            spinner : {
                id     : "spinner",
                radius : 90,
                sides  : 3,
                depth  : 4,
                colors : {
                    background : "#F0F0F0",
                    stroke     : "#272633",
                    base       : "",
                    child      : "#272633"
                },
                alwaysForward : true,
                restAt        : 0.5,
                renderBase    : false
            }
        },

        HomeHeaderAnimationRendered : true,
        HomeHeaderAnimation         : {
            radius      : 15,
            density     : 0.2,
            color       : "rgba(255, 255, 255, .2)",
            clearOffset : 0.3
        },

        BackAnimationRendered          : true,
        IEBrowserBackAnimationRendered : false,
        BackAnimation                  : {
            colorSaturation  : "60%",
            colorBrightness  : "50%",
            colorAlpha       : 0.5,
            colorCycleSpeed  : 5,
            verticalPosition : "random",
            horizontalSpeed  : 200,
            ribbonCount      : 3,
            strokeSize       : 0,
            parallaxAmount   : -0.2,
            animateSections  : true
        },

        HomeHeaderImage : [
            
                "/image/header/home.jpg",
            
                "/image/header/home.jpeg",
            
        ],
        HomeBannerText  : "",

        ArticleHeaderImage : [
            
                "/image/header/article.jpg",
            
        ],

        OtherBannerText : "",

        Error : {
            icon    : "icon-swimming",
            title   : "PAGE NOT FOUND",
            content : [
                
                    "å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ï¼",
                
                    "å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²å˜æ›´ã€‚",
                
            ],
            buttons : [
                
                    {
                        icon  : "icon-home",
                        text  : "è¿”å›é¦–é¡µ",
                        href  : "/",
                        class : ""
                    },
                
            ]
        },

        MenuNotice : {
            enable : true,
            notice : "èœå•ä¸­æœ‰å½©è›‹å“¦!",
            speed  : 20
        },
        MenuList : [
            
                {
                    name   : "é¦–é¡µ",
                    icon   : "icon-home-fill",
                    href   : "/",
                    type   : "index",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "åˆ†ç±»",
                    icon   : "icon-folder-fill",
                    href   : "/category",
                    type   : "category",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "æ ‡ç­¾",
                    icon   : "icon-discount-fill",
                    href   : "/tag",
                    type   : "tag",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "NOç”µå½±",
                    icon   : "icon-calendar-fill",
                    href   : "https://www.novipnoad.com/",
                    type   : "archive",
                    class  : "",
                    target : "_blank"
                },
            
                {
                    name   : "ç”Ÿæ´»å†™çœŸ",
                    icon   : "icon-heart-fill",
                    href   : "/donate",
                    type   : "donate",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "å…³äº",
                    icon   : "icon-about-fill",
                    href   : "/about",
                    type   : "about",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "æŠ–éŸ³",
                    icon   : "icon-rss",
                    href   : "https://www.douyin.com/",
                    type   : "",
                    class  : "",
                    target : "_blank"
                },
            
                {
                    name   : "æœç´¢",
                    icon   : "icon-search-menu",
                    href   : "javascript:;",
                    type   : "",
                    class  : "search",
                    target : "_self"
                },
            
                {
                    name   : "ç•™è¨€æ¿",
                    icon   : "icon-comments-fill",
                    href   : "/comment",
                    type   : "comment",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "å‹æƒ…é“¾æ¥",
                    icon   : "icon-link",
                    href   : "/friend",
                    type   : "friend",
                    class  : "",
                    target : "_self"
                },
            
        ],
        MenuLink : [
            
                
                    {
                        name   : "çŸ¥ä¹",
                        icon   : "icon-zhihu",
                        href   : "https://zhihu.com/people/worstone-29",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
                    {
                        name   : "å¾®åš",
                        icon   : "icon-weibo",
                        href   : "https://weibo.com/u/5749847477",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
                    {
                        name   : "QQ",
                        icon   : "icon-qq",
                        href   : "javascript:;",
                        class  : "image",
                        target : "_self",
                        image  : "/image/sidebar/7c189ea77fd8b5624d3abe3418c8117.jpg"
                    },
                
                    {
                        name   : "å¾®ä¿¡",
                        icon   : "icon-wechat",
                        href   : "javascript:;",
                        class  : "image",
                        target : "_self",
                        image  : "/image/sidebar/ee387aca83f7df7c06ed1c09e5348a7.png"
                    },
                
                    {
                        name   : "GitHub",
                        icon   : "icon-github",
                        href   : "https://github.com/first19326",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
            
        ],

        FooterStyle : 2,
        BottomText  : "<div><span class='face'>áƒ¦ã‚â—¡â•¹)ãƒâ™¡</span></div><div> ã€AE86 <span><i class='iconfont icon-like-fill'></i></span> å¥”é©°ã€‘ </div><div>&copy; 2020-2022 WorstOne. All Rights Reserved.</div>",

        ConsoleList : [
            
                
                    [
                        
                            
                                "Based on cnblogs theme SimpleMemory.",
                            
                                "",
                            
                        
                    ],
                
                    [
                        
                            
                                "SimpleMemory Author:",
                            
                                "BNDong",
                            
                        
                    ],
                
                    [
                        
                            
                                "Theme:",
                            
                                "LiveForCode",
                            
                        
                    ],
                
            
        ],

        FontIconExtend : "",

        Donate : {
            paypal  : "",
            bitcoin : "",
            alipay  : "/image/donate/177ea78362bbb97be1ec9dee9535665.png",
            wechat  : "/image/donate/e02f679085d02918a9eb3a4b6d073d4.png"
        },

        Search : {
            applicationID : "010C3EANT8",
            apiKey        : "c7abab9f11b79102b9aff7fe6d41447d",
            indexName     : "Notes",
            hits          : {
                page : 10
            },
            labels        : {
                placeholder : "æœç´¢",
                empty       : "æœªå‘ç°ä¸ ã€Œ${query}ã€ ç›¸å…³çš„å†…å®¹",
                stats       : "${hits} æ¡ç›¸å…³æ¡ç›®ï¼Œä½¿ç”¨äº† ${time} æ¯«ç§’",
            }
        }, 

        Valine : {
            switch         : true,
            el             : ".comments-content",
            appId          : "srhKtvWPQTWYKh3qX8G8M7v0-gzGzoHsz",
            appKey         : "8uVSP1q6UlALVC5igYfIfv2h",
            serverURLs     : "",
            placeholder    : "ä½ æ˜¯æˆ‘ä¸€ç”Ÿåªä¼šé‡è§ä¸€æ¬¡çš„æƒŠå–œ...",
            avatar         : "mm",
            meta           : "nick,mail,link",
            requiredFields : "nick,mail",
            pageSize       : 5,
            lang           : "zh-cn",
            visitor        : true,
            enableQQ       : true
        },

        Tocbot : {
            switch                : true,
            tocSelector           : ".toc",
            contentSelector       : ".article-body",
            headingSelector       : "h1, h2, h3, h4, h5",
            headingsOffset        : 0,
            scrollSmooth          : true,
            scrollSmoothOffset    : -5,
            positionFixedSelector : ".toc",
            positionFixedClass    : "toc-fixed",
            fixedSidebarOffset    : "",
        },

        Require : {
            baseUrl     : "/js/",
            waitSeconds : 100
        },

        Music : {
            type : "Meting"
        },
        APlayer : {
            container : ".aplayer",
            fixed     : true,
            autoplay  : false,
            loop      : "all",
            order     : "random",
            preload   : "auto",
            volume    : 0.67,
            mutex     : true,
            lrcType   : 3,
            audio     : [
                
                    {
                        name   : "Endless Tears",
                        artist : "CLIFF EDGE",
                        cover  : "/music/cover/Endless Tears.jpg",
                        url    : "/music/song/Endless Tears.mp3",
                        lrc    : "/music/lrc/Endless Tears.lrc"
                    },
                
            ]
        },
        Meting : {
            id       : "3778678", 
            lrcshow  : false, 
            server   : "netease", 
            type     : "playlist", 
            fixed    : true, 
            autoplay : false, 
            loop     : "all", 
            order    : "random", 
            preload  : "auto", 
            volume   : 0.67, 
            mutex    : true
        },

        Mouse : {
            enable  : true,
            options : {
                size  : 6,
                sizeF : 24
            }
        },

        LazyLoad : {
            default : "/image/website/lazyload.svg"
        },
  
        Style : {
            aplayer          : "/css/APlayer.css",
            archive          : "/css/archive.css",
            base             : "/css/base.css",
            clipboard        : "/css/clipboard.css",
            code             : "/css/code.css",
            donate           : "/css/donate.css",
            fancybox         : "/css/jquery.fancybox.css",
            footer           : "/css/footer.css",
            iconfont         : "/iconfont/iconfont.css",
            index            : "/css/index.css",
            menuBubble       : "/css/menu-bubble.css",
            mouse            : "/css/mouse.css",
            page             : "/css/page.css",
            post             : "/css/post.css",
            search           : "/css/search.css",
            tocbot           : "/css/tocbot.css",
            valine           : "/css/valine.css"
        },

        Script: {
            aplayer          : "/js/APlayer.min.js",
            config           : "/js/require.config.js",
            index            : "/js/index.js",
            instantSearch    : "/js/instantsearch.min.js",
            iscroll          : "/js/iscroll.js",
            jQuery           : "/js/jquery-3.4.1.min.js",
            loading          : "/js/loading.js",
            meting           : "/js/Meting.min.js",
            require          : "/js/require.min.js"
        },

        Font: {
            LongCang    : "/font/LongCang.css",
            Monda       : "/font/Monda.css",
            NotoSansSC  : "/font/NotoSansSC.css",
            NotoSerifSC : "/font/NotoSerifSC.css",
            Playball    : "/font/Playball.css",
            PTMono      : "/font/PTMono.css",
            Roboto      : "/font/Roboto.css",
            RobotoSlab  : "/font/RobotoSlab.css",
            Rosario     : "/font/Rosario.css",
            UbuntuMono  : "/font/UbuntuMono.css"
        },

        Suffix : {
            about : "å†å¿«çš„AE86,ä¹Ÿè¿½ä¸ä¸Šååœ¨å¥”é©°ä¸Šçš„å¤æ ‘å§!"
        },
            
        Theme : {
            url  : "https://github.com/first19326/Hexo-LiveForCode",
            name : "Hexo - Live For Code"
        }  
    };
</script>
    <script type="text/javascript" src="/js/index.js"></script>
</body>
</html>